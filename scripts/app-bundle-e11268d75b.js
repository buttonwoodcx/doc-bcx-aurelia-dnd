define("app",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.App=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.configureRouter=function(e,t){this.router=t,e.title="bcx-aurelia-dnd examples",e.mapUnknownRoutes("not-found.html"),e.map([{route:"",redirect:"overview"},{route:"overview",name:"overview",title:"Overview",nav:!0,settings:{section:"Tutorial"},moduleId:"tutorial/overview.html"},{route:"dnd-source",name:"dnd-source",title:"DnD Source",nav:!0,settings:{section:"Tutorial"},moduleId:"tutorial/dnd-source.html"},{route:"dnd-preview",name:"dnd-preview",title:"DnD Preview",nav:!0,settings:{section:"Tutorial"},moduleId:"tutorial/dnd-preview.html"},{route:"dnd-target",name:"dnd-target",title:"DnD Target",nav:!0,settings:{section:"Tutorial"},moduleId:"tutorial/dnd-target.html"},{route:"turn-off-preview-use-hover",name:"turn-off-preview-use-hover",title:"Turn off preview, use dndHover",nav:!0,settings:{section:"Tutorial"},moduleId:"tutorial/turn-off-preview-use-hover.html"},{route:"customise-preview-and-source-handler",name:"customise-preview-and-source-handler",title:"Customise preview, optional source handler",nav:!0,settings:{section:"Tutorial"},moduleId:"tutorial/customise-preview-and-source-handler.html"},{route:"reorderable-repeat",name:"reorderable-repeat",title:"Basics",nav:!0,settings:{section:"Tutorial of reorderable-repeat"},moduleId:"tutorial/reorderable-repeat.html"},{route:"multi-lists",name:"multi-lists",title:"Reordering across multiple lists",nav:!0,settings:{section:"Tutorial of reorderable-repeat"},moduleId:"tutorial/reorderable-repeat-multi-lists.html"},{route:"reorderable-repeat-limitation",name:"reorderable-repeat-limitation",title:"Limitation",nav:!0,settings:{section:"Tutorial of reorderable-repeat"},moduleId:"tutorial/reorderable-repeat-limitation.html"},{route:"api",name:"api",title:"API",nav:!0,settings:{section:"Reference"},moduleId:"tutorial/api.html"},{route:"faq",name:"faq",title:"FAQ",nav:!0,settings:{section:"Reference"},moduleId:"tutorial/faq.html"},{route:"testing",name:"testing",title:"Testing",nav:!0,settings:{section:"Reference"},moduleId:"tutorial/testing.html"},{route:"typescript-support",name:"typescript-support",title:"TypeScript Support",nav:!0,settings:{section:"Reference"},moduleId:"tutorial/typescript-support.html"},{route:"e1-simple-move",name:"e1-simple-move",title:"1. move object",nav:!0,settings:{section:"Examples"},moduleId:"examples/e1-simple-move/index"},{route:"e2-simple-move-hover",name:"e2-simple-move-hover",title:"2. move object, preview off, use dndHover",nav:!0,settings:{section:"Examples"},moduleId:"examples/e2-simple-move-hover/index"},{route:"e3-customise-preview",name:"e3-customise-preview",title:"3. customise preview",nav:!0,settings:{section:"Examples"},moduleId:"examples/e3-customise-preview/index"},{route:"e4-handler-move",name:"e4-handler-move",title:"4. source handler and bcx-dnd-preview-hide",nav:!0,settings:{section:"Examples"},moduleId:"examples/e4-handler-move/index"},{route:"e5-draw",name:"e5-draw",title:"5. use DnD to draw",nav:!0,settings:{section:"Examples"},moduleId:"examples/e5-draw/index"},{route:"e6-reorder-list",name:"e6-reorder-list",title:"6. underneath algorithm of reorderable-repeat",nav:!0,settings:{section:"Examples"},moduleId:"examples/e6-reorder-list/index"},{route:"e7-move-and-resize",name:"e7-move-and-resize",title:"7. move and resize",nav:!0,settings:{section:"Examples"},moduleId:"examples/e7-move-and-resize/index"},{route:"more-examples",name:"more-examples",title:"8. want more examples?",nav:!0,settings:{section:"Examples"},moduleId:"more-examples.html"},{route:"er1-reorderable-repeat",name:"er1-reorderable-repeat",title:"1. reorder list",nav:!0,settings:{section:"Examples of reorderable-repeat"},moduleId:"examples/er1-reorderable-repeat/index"},{route:"er2-reorderable-repeat-customise-style",name:"er2-reorderable-repeat-customise-style",title:"2. reorder list with customised style",nav:!0,settings:{section:"Examples of reorderable-repeat"},moduleId:"examples/er2-reorderable-repeat-customise-style/index"},{route:"er3-reorderable-repeat-with-handler",name:"er3-reorderable-repeat-with-handler",title:"3. reorder list with handler",nav:!0,settings:{section:"Examples of reorderable-repeat"},moduleId:"examples/er3-reorderable-repeat-with-handler/index"},{route:"er4-reorderable-repeat-customise-preview",name:"er4-reorderable-repeat-customise-preview",title:"4. reorder list with customised preview",nav:!0,settings:{section:"Examples of reorderable-repeat"},moduleId:"examples/er4-reorderable-repeat-customise-preview/index"},{route:"er5-reorderable-repeat-direction",name:"er5-reorderable-repeat-direction",title:"5. flow direction",nav:!0,settings:{section:"Examples of reorderable-repeat"},moduleId:"examples/er5-reorderable-repeat-direction/index"},{route:"er6-multi-lists",name:"er6-multi-lists",title:"6. multi-lists reordering",nav:!0,settings:{section:"Examples of reorderable-repeat"},moduleId:"examples/er6-multi-lists/index"},{route:"er7-multi-lists",name:"er7-multi-lists",title:"7. multi-lists with reorderable-group-for",nav:!0,settings:{section:"Examples of reorderable-repeat"},moduleId:"examples/er7-multi-lists-with-group-for/index"}])},e}()}),define("text!app.html",[],function(){return'<template>\n  <require from="bcx-doc-base/css/doc.css"></require>\n\n  <bcx-doc-nav router.bind="router">\n    <div slot="top">\n      <h5><em>Github Repos</em></h5>\n      <a href="https://github.com/buttonwoodcx/bcx-aurelia-dnd" class="link remote-link">bcx-aurelia-dnd v1.0.0</a>\n      <a href="https://github.com/buttonwoodcx/bcx-aurelia-reorderable-repeat" class="link remote-link">bcx-aurelia-reorderable-repeat v1.1.0</a>\n    </div>\n  </bcx-doc-nav>\n\n  <div class="bcx-doc-main" as-element="router-view"></div>\n</template>\n'}),define("environment",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debug:!1,testing:!1}}),define("examples/e1-simple-move-step-1/box",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box=void 0;var o,i,r,a,d,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function c(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}e.Box=(o=(0,t.inject)(n.DndService),i=(0,t.computedFrom)("item","item.x","item.y"),o((a=function(){function e(t){var n,o,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o="item",r=this,(i=d)&&Object.defineProperty(n,o,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0}),this.dndService=t}return e.prototype.attached=function(){this.dndService.addSource(this)},e.prototype.detached=function(){this.dndService.removeSource(this)},e.prototype.dndModel=function(){return{type:"moveItem",item:this.item}},s(e,[{key:"positionCss",get:function(){return{left:(this.item&&this.item.x||0)+"px",top:(this.item&&this.item.y||0)+"px"}}}]),e}(),d=c(a.prototype,"item",[t.bindable],{enumerable:!0,initializer:null}),c(a.prototype,"positionCss",[i],Object.getOwnPropertyDescriptor(a.prototype,"positionCss"),a.prototype),r=a))||r)}),define("text!examples/e1-simple-move-step-1/box.css",[],function(){return".e1-example-box-step-1 {\n  position: absolute;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: 80px;\n  height: 40px;\n  border: 1px solid #555;\n  background: white;\n}"}),define("text!examples/e1-simple-move-step-1/box.html",[],function(){return'<template>\n  <require from="./box.css"></require>\n\n  <div\n    ref="dndElement"\n    class="e1-example-box-step-1"\n    style.bind="positionCss"\n    show.bind="!draggingMe"\n  >\n    ${item.name}\n  </div>\n</template>'}),define("examples/e1-simple-move-step-1/container",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Container=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{name:"A",x:20,y:20},{name:"B",x:50,y:200},{name:"C",x:200,y:100}]}}),define("text!examples/e1-simple-move-step-1/container.css",[],function(){return".e1-example-container-step-1 {\n  position: relative;\n  box-sizing: border-box;\n  width: 300px;\n  height: 300px;\n  border: 1px solid #555;\n  overflow: hidden;\n}"}),define("text!examples/e1-simple-move-step-1/container.html",[],function(){return'<template>\n  <require from="./container.css"></require>\n  <require from="./box"></require>\n\n  <div ref="dndElement" class="e1-example-container-step-1">\n    <box repeat.for="item of items" item.bind="item"></box>\n  </div>\n</template>\n'}),define("examples/e1-simple-move-step-1/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/e1-simple-move-step-1/box.js","src/examples/e1-simple-move-step-1/box.html","src/examples/e1-simple-move-step-1/box.css","src/examples/e1-simple-move-step-1/container.js","src/examples/e1-simple-move-step-1/container.html","src/examples/e1-simple-move-step-1/container.css"]}}),define("text!examples/e1-simple-move-step-1/index.html",[],function(){return'<template>\n  <require from="./container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <container></container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/e1-simple-move-step-2/box",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box=void 0;var o,i,r,a,d,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function c(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}e.Box=(o=(0,t.inject)(n.DndService),i=(0,t.computedFrom)("item","item.x","item.y"),o((a=function(){function e(t){var n,o,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o="item",r=this,(i=d)&&Object.defineProperty(n,o,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0}),this.dndService=t}return e.prototype.attached=function(){this.dndService.addSource(this)},e.prototype.detached=function(){this.dndService.removeSource(this)},e.prototype.dndModel=function(){return{type:"moveItem",item:this.item}},s(e,[{key:"positionCss",get:function(){return{left:(this.item&&this.item.x||0)+"px",top:(this.item&&this.item.y||0)+"px"}}}]),e}(),d=c(a.prototype,"item",[t.bindable],{enumerable:!0,initializer:null}),c(a.prototype,"positionCss",[i],Object.getOwnPropertyDescriptor(a.prototype,"positionCss"),a.prototype),r=a))||r)}),define("text!examples/e1-simple-move-step-2/box.css",[],function(){return".e1-example-box-step-2 {\n  position: absolute;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: 80px;\n  height: 40px;\n  border: 1px solid #555;\n  background: white;\n}"}),define("text!examples/e1-simple-move-step-2/box.html",[],function(){return'<template>\n  <require from="./box.css"></require>\n\n  <div\n    ref="dndElement"\n    class="e1-example-box-step-2"\n    style.bind="positionCss"\n  >\n    ${item.name}\n  </div>\n</template>'}),define("examples/e1-simple-move-step-2/container",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;e.Container=(0,t.inject)(n.DndService)(o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{name:"A",x:20,y:20},{name:"B",x:50,y:200},{name:"C",x:200,y:100}],this.dndService=t}return e.prototype.attached=function(){this.dndService.addTarget(this)},e.prototype.detached=function(){this.dndService.removeTarget(this)},e.prototype.dndCanDrop=function(e){return"moveItem"===e.type},e.prototype.dndDrop=function(e){var t=this.dnd.model.item,n=e.previewElementRect,o=e.targetElementRect,i={x:n.x-o.x,y:n.y-o.y};t.x=i.x,t.y=i.y;var r=this.items.indexOf(t);r>=0&&(this.items.splice(r,1),this.items.push(t))},e}())||o}),define("text!examples/e1-simple-move-step-2/container.css",[],function(){return".e1-example-container-step-2 {\n  position: relative;\n  box-sizing: border-box;\n  width: 300px;\n  height: 300px;\n  border: 1px solid #555;\n  overflow: hidden;\n}"}),define("text!examples/e1-simple-move-step-2/container.html",[],function(){return'<template>\n  <require from="./container.css"></require>\n  <require from="./box"></require>\n\n  <div ref="dndElement" class="e1-example-container-step-2">\n    <box repeat.for="item of items" item.bind="item"></box>\n  </div>\n</template>\n'}),define("examples/e1-simple-move-step-2/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/e1-simple-move-step-2/container.js","src/examples/e1-simple-move-step-2/container.html","src/examples/e1-simple-move-step-2/container.css","src/examples/e1-simple-move-step-2/box.js","src/examples/e1-simple-move-step-2/box.html","src/examples/e1-simple-move-step-2/box.css"]}}),define("text!examples/e1-simple-move-step-2/index.html",[],function(){return'<template>\n  <require from="./container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <container></container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/e1-simple-move/box",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box=void 0;var o,i,r,a,d,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function l(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}e.Box=(o=(0,t.inject)(n.DndService),i=(0,t.computedFrom)("item","item.x","item.y"),r=(0,t.computedFrom)("dndService.isProcessing","dndService.model"),o((d=function(){function e(t){var n,o,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o="item",r=this,(i=s)&&Object.defineProperty(n,o,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0}),this.dndService=t}return e.prototype.attached=function(){this.dndService.addSource(this)},e.prototype.detached=function(){this.dndService.removeSource(this)},e.prototype.dndModel=function(){return{type:"moveItem",item:this.item}},c(e,[{key:"positionCss",get:function(){return{left:(this.item&&this.item.x||0)+"px",top:(this.item&&this.item.y||0)+"px"}}},{key:"draggingMe",get:function(){return this.dndService.isProcessing&&this.dndService.model.item===this.item}}]),e}(),s=l(d.prototype,"item",[t.bindable],{enumerable:!0,initializer:null}),l(d.prototype,"positionCss",[i],Object.getOwnPropertyDescriptor(d.prototype,"positionCss"),d.prototype),l(d.prototype,"draggingMe",[r],Object.getOwnPropertyDescriptor(d.prototype,"draggingMe"),d.prototype),a=d))||a)}),define("text!examples/e1-simple-move/box.css",[],function(){return".e1-example-box {\n  position: absolute;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: 80px;\n  height: 40px;\n  border: 1px solid #555;\n  background: white;\n}"}),define("text!examples/e1-simple-move/box.html",[],function(){return'<template>\n  <require from="./box.css"></require>\n\n  <div\n    ref="dndElement"\n    class="e1-example-box"\n    style.bind="positionCss"\n    show.bind="!draggingMe"\n  >\n    ${item.name}\n  </div>\n</template>'}),define("examples/e1-simple-move/container",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;e.Container=(0,t.inject)(n.DndService)(o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{name:"A",x:20,y:20},{name:"B",x:50,y:200},{name:"C",x:200,y:100}],this.dndService=t}return e.prototype.attached=function(){this.dndService.addTarget(this)},e.prototype.detached=function(){this.dndService.removeTarget(this)},e.prototype.dndCanDrop=function(e){return"moveItem"===e.type},e.prototype.dndDrop=function(e){var t=this.dnd.model.item,n=e.previewElementRect,o=e.targetElementRect,i={x:n.x-o.x,y:n.y-o.y};t.x=i.x,t.y=i.y;var r=this.items.indexOf(t);r>=0&&(this.items.splice(r,1),this.items.push(t))},e}())||o}),define("text!examples/e1-simple-move/container.css",[],function(){return".e1-example-container {\n  position: relative;\n  box-sizing: border-box;\n  width: 300px;\n  height: 300px;\n  border: 1px solid #555;\n  overflow: hidden;\n}"}),define("text!examples/e1-simple-move/container.html",[],function(){return'<template>\n  <require from="./container.css"></require>\n  <require from="./box"></require>\n\n  <div ref="dndElement" class="e1-example-container">\n    <box repeat.for="item of items" item.bind="item"></box>\n  </div>\n</template>\n'}),define("examples/e1-simple-move/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/e1-simple-move/box.js","src/examples/e1-simple-move/box.html","src/examples/e1-simple-move/box.css","src/examples/e1-simple-move/container.js","src/examples/e1-simple-move/container.html","src/examples/e1-simple-move/container.css"]}}),define("text!examples/e1-simple-move/index.html",[],function(){return'<template>\n  <require from="./container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <container></container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/e2-simple-move-hover/box",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box=void 0;var o,i,r,a,d,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function c(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}e.Box=(o=(0,t.inject)(n.DndService),i=(0,t.computedFrom)("item","item.x","item.y"),o((a=function(){function e(t){var n,o,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o="item",r=this,(i=d)&&Object.defineProperty(n,o,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0}),this.dndService=t,this.updateClock=this.updateClock.bind(this),this.updateClock()}return e.prototype.attached=function(){this.dndService.addSource(this,{noPreview:!0}),this.clockUpdator=setInterval(this.updateClock,1e3)},e.prototype.detached=function(){this.dndService.removeSource(this),this.clockUpdator&&(clearInterval(this.clockUpdator),this.clockUpdator=null)},e.prototype.updateClock=function(){var e=new Date;this.clock=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},e.prototype.dndModel=function(){return{type:"moveItem",id:this.item.id}},s(e,[{key:"positionCss",get:function(){return{left:(this.item&&this.item.x||0)+"px",top:(this.item&&this.item.y||0)+"px"}}}]),e}(),d=c(a.prototype,"item",[t.bindable],{enumerable:!0,initializer:null}),c(a.prototype,"positionCss",[i],Object.getOwnPropertyDescriptor(a.prototype,"positionCss"),a.prototype),r=a))||r)}),define("text!examples/e2-simple-move-hover/box.css",[],function(){return".e2-example-box {\n  position: absolute;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: 80px;\n  height: 40px;\n  border: 1px solid #555;\n  background: white;\n  line-height: 1;\n}"}),define("text!examples/e2-simple-move-hover/box.html",[],function(){return'<template>\n  <require from="./box.css"></require>\n\n  <div\n    ref="dndElement"\n    class="e2-example-box"\n    style.bind="positionCss"\n  >\n    ${item.name}<br>${clock}\n  </div>\n</template>'}),define("examples/e2-simple-move-hover/container",["exports","aurelia-framework","bcx-aurelia-dnd","aurelia-event-aggregator","lodash"],function(e,t,n,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var r,a=(r=i)&&r.__esModule?r:{default:r};var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var s,c,l,u,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var m,h,f,b,v,g;e.Container=(s=(0,t.inject)(n.DndService,o.EventAggregator),c=(0,t.computedFrom)("items","intention"),s((u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{id:"a",name:"A",x:20,y:20},{id:"b",name:"B",x:50,y:200},{id:"c",name:"C",x:200,y:100}],this.dndService=t,this.ea=n}return e.prototype.attached=function(){var e=this;this.dndService.addTarget(this),this.subscribers=[this.ea.subscribe("dnd:willStart",function(){return e.resetIntention()}),this.ea.subscribe("dnd:didEnd",function(){return e.resetIntention()})]},e.prototype.detached=function(){this.dndService.removeTarget(this),this.subscribers.forEach(function(e){return e.dispose()})},e.prototype.dndCanDrop=function(e){return"moveItem"===e.type},e.prototype.dndDrop=function(){var e=this.items,t=this.intention;if(t){var n=a.default.findIndex(e,{id:t.id});if(n>=0){var o=e[n];e.splice(n,1),e.push(d({},o,{x:t.x,y:t.y}))}}},e.prototype.dndHover=function(e){var t=this.dnd.model.id,n=e.previewElementRect,o=e.targetElementRect,i={x:n.x-o.x,y:n.y-o.y};a.default.find(this.items,{id:t})&&(this.intention={id:t,x:i.x,y:i.y})},e.prototype.resetIntention=function(){this.intention=null},p(e,[{key:"patchedItems",get:function(){var e=this.items,t=this.intention;if(!t)return e;var n=a.default.reject(e,{id:t.id}),o=a.default.find(this.items,{id:t.id});return o&&n.push(d({},o,{x:t.x,y:t.y})),n}}]),e}(),m=u.prototype,h="patchedItems",f=[c],b=Object.getOwnPropertyDescriptor(u.prototype,"patchedItems"),v=u.prototype,g={},Object.keys(b).forEach(function(e){g[e]=b[e]}),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=f.slice().reverse().reduce(function(e,t){return t(m,h,e)||e},g),v&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(v):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(m,h,g),g=null),l=u))||l)}),define("text!examples/e2-simple-move-hover/container.css",[],function(){return".e2-example-container {\n  position: relative;\n  box-sizing: border-box;\n  width: 300px;\n  height: 300px;\n  border: 1px solid #555;\n  overflow: hidden;\n}"}),define("text!examples/e2-simple-move-hover/container.html",[],function(){return'<template>\n  <require from="./container.css"></require>\n  <require from="./box"></require>\n\n  <div ref="dndElement" class="e2-example-container">\n    <box repeat.for="item of patchedItems" item.bind="item"></box>\n  </div>\n</template>\n'}),define("examples/e2-simple-move-hover/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/e2-simple-move-hover/container.js","src/examples/e2-simple-move-hover/container.html","src/examples/e2-simple-move-hover/container.css","src/examples/e2-simple-move-hover/box.js","src/examples/e2-simple-move-hover/box.html","src/examples/e2-simple-move-hover/box.css"]}}),define("text!examples/e2-simple-move-hover/index.html",[],function(){return'<template>\n  <require from="./container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <container></container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/e2-simple-move-hover/test",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["test/unit/e2-simple-move-hover/container.spec.js","test/unit/e2-simple-move-hover/box.spec.js"]}}),define("examples/e3-customise-preview/add-box",["exports","aurelia-framework","bcx-aurelia-dnd","jquery"],function(e,t,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AddBox=void 0;var i,r,a=(i=o)&&i.__esModule?i:{default:i};e.AddBox=(0,t.inject)(n.DndService)(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dndService=t}return e.prototype.attached=function(){this.dndService.addSource(this)},e.prototype.detached=function(){this.dndService.removeSource(this)},e.prototype.dndModel=function(){return{type:"addItem"}},e.prototype.dndPreview=function(){return(0,a.default)('<div class="e3-example-box">new box</div>').get(0)},e}())||r}),define("text!examples/e3-customise-preview/add-box.html",[],function(){return'<template>\n  <button ref="dndElement">Box</button>\n</template>'}),define("examples/e3-customise-preview/add-money",["exports","aurelia-framework","bcx-aurelia-dnd","jquery"],function(e,t,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AddMoney=void 0;var i,r,a=(i=o)&&i.__esModule?i:{default:i};e.AddMoney=(0,t.inject)(n.DndService)(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dndService=t}return e.prototype.attached=function(){this.dndService.addSource(this,{centerPreviewToMousePosition:!0,hideCursor:!0})},e.prototype.detached=function(){this.dndService.removeSource(this)},e.prototype.dndModel=function(){return{type:"addDollar"}},e.prototype.dndPreview=function(){return(0,a.default)('<div class="e3-dollar"></div>').get(0)},e}())||r}),define("text!examples/e3-customise-preview/add-money.css",[],function(){return".e3-dollar {\n  display: block;\n  font-size: 2rem;\n  font-weight: bold;\n  width: auto;\n  height: auto;\n}\n\n.e3-dollar:before {\n  content: '$';\n}\n\n/* overwrite default style of dnd preview */\n.bcx-dnd-preview.e3-dollar {\n  opacity: 1;\n  box-shadow: none;\n}\n"}),define("text!examples/e3-customise-preview/add-money.html",[],function(){return'<template>\n  <require from="./add-money.css"></require>\n  <button ref="dndElement">Money</button>\n</template>\n'}),define("examples/e3-customise-preview/box",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box=void 0;var o,i,r,a,d,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function l(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}e.Box=(o=(0,t.inject)(n.DndService),i=(0,t.computedFrom)("item","item.x","item.y"),r=(0,t.computedFrom)("dnd","dnd.model","dnd.isProcessing","dnd.canDrop","dnd.isHoveringShallowly"),o((d=function(){function e(t){var n,o,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o="item",r=this,(i=s)&&Object.defineProperty(n,o,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0}),this.dndService=t}return e.prototype.attached=function(){this.dndService.addSource(this,{noPreview:!0}),this.dndService.addTarget(this)},e.prototype.detached=function(){this.dndService.removeSource(this),this.dndService.removeTarget(this)},e.prototype.dndModel=function(){return{type:"moveItem",id:this.item.id}},e.prototype.dndCanDrop=function(e){return"addDollar"===e.type},e.prototype.dndDrop=function(){"addDollar"===this.dnd.model.type&&(this.item.dollars+=1)},c(e,[{key:"positionCss",get:function(){return{left:(this.item&&this.item.x||0)+"px",top:(this.item&&this.item.y||0)+"px"}}},{key:"dndCss",get:function(){if(!this.dnd)return"";var e=this.dnd,t=e.model,n=e.isProcessing,o=e.canDrop,i=e.isHoveringShallowly;if(!n)return"";if("moveItem"===t.type)return"";var r="";return r+=o?"can-drop":"can-not-drop",i&&(r+=" shallow-hover"),r}}]),e}(),s=l(d.prototype,"item",[t.bindable],{enumerable:!0,initializer:null}),l(d.prototype,"positionCss",[i],Object.getOwnPropertyDescriptor(d.prototype,"positionCss"),d.prototype),l(d.prototype,"dndCss",[r],Object.getOwnPropertyDescriptor(d.prototype,"dndCss"),d.prototype),a=d))||a)}),define("text!examples/e3-customise-preview/box.css",[],function(){return".e3-example-box {\n  position: absolute;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: 80px;\n  height: 40px;\n  border: 1px solid #555;\n  background: white;\n}"}),define("text!examples/e3-customise-preview/box.html",[],function(){return'<template>\n  <require from="./box.css"></require>\n\n  <div\n    ref="dndElement"\n    class="e3-example-box ${dndCss}"\n    style.bind="positionCss"\n  >\n    $${item.dollars}\n  </div>\n</template>'}),define("examples/e3-customise-preview/container",["exports","aurelia-framework","bcx-aurelia-dnd","aurelia-event-aggregator","lodash"],function(e,t,n,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var r,a=(r=i)&&r.__esModule?r:{default:r};var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var s,c,l,u,p,m=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function h(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}e.Container=(s=(0,t.inject)(n.DndService,o.EventAggregator),c=(0,t.computedFrom)("items","intention"),l=(0,t.computedFrom)("dnd","dnd.model","dnd.isProcessing","dnd.canDrop","dnd.isHoveringShallowly"),s((h((p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{id:"0",dollars:1,x:20,y:20},{id:"1",dollars:1,x:50,y:200},{id:"2",dollars:1,x:200,y:100}],this.dndService=t,this.ea=n}return e.prototype.attached=function(){var e=this;this.dndService.addTarget(this),this.subscribers=[this.ea.subscribe("dnd:willStart",function(){return e.resetIntention()}),this.ea.subscribe("dnd:didEnd",function(){return e.resetIntention()})]},e.prototype.detached=function(){this.dndService.removeTarget(this),this.subscribers.forEach(function(e){return e.dispose()})},e.prototype.dndCanDrop=function(e){return"moveItem"===e.type||"addItem"===e.type},e.prototype.dndDrop=function(e){var t=this.dnd.model,n=t.type,o=t.id,i=e.previewElementRect,r=e.targetElementRect,s={x:i.x-r.x,y:i.y-r.y};if("moveItem"===n){var c=a.default.findIndex(this.items,{id:o});if(c<0)return;var l=d({},this.items[c],s);this.items.splice(c,1),this.items.push(l)}else"addItem"===n&&this.items.push(d({id:""+this.items.length,dollars:1},s))},e.prototype.dndHover=function(e){var t=this.dnd.model,n=t.type,o=t.id,i=e.previewElementRect,r=e.targetElementRect,d={x:i.x-r.x,y:i.y-r.y};if("moveItem"===n){if(!a.default.find(this.items,{id:o}))return;this.intention={id:o,x:d.x,y:d.y}}},e.prototype.resetIntention=function(){this.intention=null},m(e,[{key:"patchedItems",get:function(){var e=this.items,t=this.intention;if(!t)return e;var n=a.default.reject(e,{id:t.id}),o=a.default.find(this.items,{id:t.id});return o&&n.push(d({},o,{x:t.x,y:t.y})),n}},{key:"dndCss",get:function(){if(!this.dnd)return"";var e=this.dnd,t=e.model,n=e.isProcessing,o=e.canDrop,i=e.isHoveringShallowly;if(!n)return"";if("moveItem"===t.type)return"";var r="";return r+=o?"can-drop":"can-not-drop",i&&(r+=" shallow-hover"),r}}]),e}()).prototype,"patchedItems",[c],Object.getOwnPropertyDescriptor(p.prototype,"patchedItems"),p.prototype),h(p.prototype,"dndCss",[l],Object.getOwnPropertyDescriptor(p.prototype,"dndCss"),p.prototype),u=p))||u)}),define("text!examples/e3-customise-preview/container.css",[],function(){return".e3-example-container {\n  position: relative;\n  box-sizing: border-box;\n  width: 300px;\n  height: 300px;\n  border: 1px solid #555;\n  overflow: hidden;\n}"}),define("text!examples/e3-customise-preview/container.html",[],function(){return'<template>\n  <require from="./container.css"></require>\n  <require from="./target-effect.css"></require>\n  <require from="./box"></require>\n  <require from="./add-box"></require>\n  <require from="./add-money"></require>\n\n  <p>\n    Drag to canvas\n    <add-box></add-box>\n    <add-money></add-money>\n  </p>\n\n  <div ref="dndElement" class="e3-example-container ${dndCss}">\n    <box repeat.for="item of patchedItems" item.bind="item"></box>\n  </div>\n</template>\n'}),define("examples/e3-customise-preview/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/e3-customise-preview/add-box.js","src/examples/e3-customise-preview/add-box.html","src/examples/e3-customise-preview/add-money.js","src/examples/e3-customise-preview/add-money.html","src/examples/e3-customise-preview/add-money.css","src/examples/e3-customise-preview/box.js","src/examples/e3-customise-preview/box.html","src/examples/e3-customise-preview/box.css","src/examples/e3-customise-preview/container.js","src/examples/e3-customise-preview/container.html","src/examples/e3-customise-preview/container.css","src/examples/e3-customise-preview/target-effect.css"]}}),define("text!examples/e3-customise-preview/index.html",[],function(){return'<template>\n  <require from="./container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <container></container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("text!examples/e3-customise-preview/target-effect.css",[],function(){return".e3-example-container.can-drop,\n.e3-example-box.can-drop {\n  background-color: lightgreen;\n}\n\n.e3-example-container.can-drop.shallow-hover,\n.e3-example-box.can-drop.shallow-hover {\n  outline: 3px solid green;\n}\n\n.e3-example-container.can-not-drop,\n.example-box.can-not-drop {\n  background-color: lightgrey;\n}\n"}),define("examples/e4-handler-move/box",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box=void 0;var o,i,r,a,d,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function l(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}e.Box=(o=(0,t.inject)(n.DndService),i=(0,t.computedFrom)("item","item.x","item.y"),r=(0,t.computedFrom)("dndService.isProcessing","dndService.model"),o((d=function(){function e(t){var n,o,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o="item",r=this,(i=s)&&Object.defineProperty(n,o,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0}),this.dndService=t}return e.prototype.attached=function(){this.dndService.addSource(this,{handler:this.handler})},e.prototype.detached=function(){this.dndService.removeSource(this)},e.prototype.dndModel=function(){return{type:"moveItem",item:this.item}},c(e,[{key:"positionCss",get:function(){return{left:(this.item&&this.item.x||0)+"px",top:(this.item&&this.item.y||0)+"px"}}},{key:"draggingMe",get:function(){return this.dndService.isProcessing&&this.dndService.model.item===this.item}}]),e}(),s=l(d.prototype,"item",[t.bindable],{enumerable:!0,initializer:null}),l(d.prototype,"positionCss",[i],Object.getOwnPropertyDescriptor(d.prototype,"positionCss"),d.prototype),l(d.prototype,"draggingMe",[r],Object.getOwnPropertyDescriptor(d.prototype,"draggingMe"),d.prototype),a=d))||a)}),define("text!examples/e4-handler-move/box.css",[],function(){return".e4-example-box {\n  position: absolute;\n  box-sizing: border-box;\n  width: 80px;\n  height: 40px;\n  border: 1px solid #555;\n  background: white;\n  padding-left: 40px;\n  padding-top: 5px;\n}\n\n.e4-example-box .e4-pin {\n  position: absolute;\n  top: 50%;\n  left: 10px;\n  margin-top: -10px;\n  width: 20px;\n  height: 20px;\n  border: 1px solid gray;\n  cursor: pointer;\n}\n"}),define("text!examples/e4-handler-move/box.html",[],function(){return'<template>\n  <require from="./box.css"></require>\n\n  <div\n    ref="dndElement"\n    class="e4-example-box"\n    style.bind="positionCss"\n    show.bind="!draggingMe"\n  >\n    <div ref="handler" class="e4-pin"></div>\n\n    <span>${item.name}</span>\n    <i class="far fa-edit bcx-dnd-preview-hide"></i>\n  </div>\n</template>'}),define("examples/e4-handler-move/container",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;e.Container=(0,t.inject)(n.DndService)(o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{name:"A",x:20,y:20},{name:"B",x:50,y:200},{name:"C",x:200,y:100}],this.dndService=t}return e.prototype.attached=function(){this.dndService.addTarget(this)},e.prototype.detached=function(){this.dndService.removeTarget(this)},e.prototype.dndCanDrop=function(e){return"moveItem"===e.type},e.prototype.dndDrop=function(e){var t=this.dnd.model.item,n=e.previewElementRect,o=e.targetElementRect,i={x:n.x-o.x,y:n.y-o.y};t.x=i.x,t.y=i.y;var r=this.items.indexOf(t);r>=0&&(this.items.splice(r,1),this.items.push(t))},e}())||o}),define("text!examples/e4-handler-move/container.css",[],function(){return".e4-example-container {\n  position: relative;\n  box-sizing: border-box;\n  width: 300px;\n  height: 300px;\n  border: 1px solid #555;\n  overflow: hidden;\n}"}),define("text!examples/e4-handler-move/container.html",[],function(){return'<template>\n  <require from="./container.css"></require>\n  <require from="./box"></require>\n\n  <div ref="dndElement" class="e4-example-container">\n    <box repeat.for="item of items" item.bind="item"></box>\n  </div>\n</template>\n'}),define("examples/e4-handler-move/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/e4-handler-move/box.js","src/examples/e4-handler-move/box.html","src/examples/e4-handler-move/box.css","src/examples/e4-handler-move/container.js","src/examples/e4-handler-move/container.html","src/examples/e4-handler-move/container.css"]}}),define("text!examples/e4-handler-move/index.html",[],function(){return'<template>\n  <require from="./container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <container></container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/e5-draw/canvas-container",["exports","aurelia-framework","bcx-aurelia-dnd","aurelia-event-aggregator"],function(e,t,n,o){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasContainer=void 0;e.CanvasContainer=(0,t.inject)(n.DndService,o.EventAggregator)(i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapes=[],this.selectedType="drawLine",this.drawingTypes=[{value:"drawLine",label:"Line"},{value:"drawRect",label:"Rectangular"}],this.dndService=t,this.ea=n}return e.prototype.attached=function(){var e=this;this.dndService.addSource(this,{noPreview:!0}),this.dndService.addTarget(this),this.subscribers=[this.ea.subscribe("dnd:willStart",function(){return e.resetDrawingShape()}),this.ea.subscribe("dnd:didEnd",function(){return e.resetDrawingShape()})]},e.prototype.detached=function(){this.dndService.removeSource(this),this.dndService.removeTarget(this),this.subscribers.forEach(function(e){return e.dispose()})},e.prototype.resetDrawingShape=function(){this.drawingShape=null},e.prototype.dndModel=function(){return{type:this.selectedType}},e.prototype.dndCanDrop=function(e){return"drawLine"===e.type||"drawRect"===e.type},e.prototype.dndHover=function(e){var t=e.mouseStartAt,n=e.targetElementRect,o=e.mouseEndAt,i={x:t.x-n.x,y:t.y-n.y},r={x:o.x-n.x,y:o.y-n.y};if("drawLine"===this.dnd.model.type)this.drawingShape={type:"line",from:i,to:r};else if("drawRect"===this.dnd.model.type){var a=Math.min(i.x,r.x),d=Math.min(i.y,r.y),s=Math.abs(i.x-r.x),c=Math.abs(i.y-r.y);this.drawingShape={type:"rect",x:a,y:d,width:s,height:c}}},e.prototype.dndDrop=function(){this.drawingShape&&this.shapes.push(this.drawingShape)},e}())||i}),define("text!examples/e5-draw/canvas-container.html",[],function(){return'<template>\n  <p>Draw\n    <select value.bind="selectedType">\n      <option repeat.for="type of drawingTypes" model.bind="type.value">${type.label}</option>\n    </select>\n  </p>\n\n  <svg ref="dndElement" width="300" height="300">\n    \x3c!-- draw border of svg --\x3e\n    <rect\n      x="0"\n      y="0"\n      width="300"\n      height="300"\n      stroke="#555"\n      stroke-width="1"\n      fill="transparent"\n    ></rect>\n\n    <g repeat.for="shape of shapes">\n      <line\n        if.bind="shape.type == \'line\'"\n        x1.bind="shape.from.x"\n        y1.bind="shape.from.y"\n        x2.bind="shape.to.x"\n        y2.bind="shape.to.y"\n        stroke="#333"\n      ></line>\n\n      <rect\n        if.bind="shape.type == \'rect\'"\n        x.bind="shape.x"\n        y.bind="shape.y"\n        width.bind="shape.width"\n        height.bind="shape.height"\n        stroke="#333"\n        stroke-width="1"\n        fill="transparent"\n      ></rect>\n    </g>\n\n\n    <line\n      if.bind="drawingShape.type == \'line\'"\n      x1.bind="drawingShape.from.x"\n      y1.bind="drawingShape.from.y"\n      x2.bind="drawingShape.to.x"\n      y2.bind="drawingShape.to.y"\n      stroke="blue"\n    ></line>\n\n    <rect\n      if.bind="drawingShape.type == \'rect\'"\n      x.bind="drawingShape.x"\n      y.bind="drawingShape.y"\n      width.bind="drawingShape.width"\n      height.bind="drawingShape.height"\n      stroke="blue"\n      stroke-width="1"\n      fill="transparent"\n    ></rect>\n  </svg>\n</template>\n'}),define("examples/e5-draw/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/e5-draw/canvas-container.js","src/examples/e5-draw/canvas-container.html"]}}),define("text!examples/e5-draw/index.html",[],function(){return'<template>\n  <require from="./canvas-container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <canvas-container></canvas-container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/e6-reorder-list/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/e6-reorder-list/list-container.js","src/examples/e6-reorder-list/list-container.html","src/examples/e6-reorder-list/list-container.css","src/examples/e6-reorder-list/item.js","src/examples/e6-reorder-list/item.html","src/examples/e6-reorder-list/item.css"]}}),define("text!examples/e6-reorder-list/index.html",[],function(){return'<template>\n  <require from="./list-container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <p>This demo shows the basic algorithm behind <a href="#/reorderable-repeat">reorderable-repeat</a>.</p>\n      <list-container></list-container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/e6-reorder-list/item",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";function o(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}Object.defineProperty(e,"__esModule",{value:!0}),e.Item=void 0;var i,r,a,d,s,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function u(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}e.Item=(i=(0,t.inject)(n.DndService),r=(0,t.computedFrom)("item","dndService.isProcessing","dndService.model"),i((d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"item",s,this),o(this,"updateIntention",c,this),this.dndService=t}return e.prototype.attached=function(){this.dndService.addSource(this),this.dndService.addTarget(this)},e.prototype.detached=function(){this.dndService.removeSource(this),this.dndService.removeTarget(this)},e.prototype.dndModel=function(){return{type:"orderItemFlex",id:this.item.id}},e.prototype.dndCanDrop=function(e){return"orderItemFlex"===e.type&&e.id!==this.item.id},e.prototype.dndDrop=function(){},e.prototype.dndHover=function(e){var t=e.mouseEndAt,n=e.targetElementRect;t.y-n.y<n.height/2?this.updateIntention({targetId:this.item.id,beforeTarget:!0}):this.updateIntention({targetId:this.item.id,beforeTarget:!1})},l(e,[{key:"draggingMe",get:function(){var e=this.item,t=this.dndService;return t.isProcessing&&"orderItemFlex"===t.model.type&&t.model.id===e.id}}]),e}(),s=u(d.prototype,"item",[t.bindable],{enumerable:!0,initializer:null}),c=u(d.prototype,"updateIntention",[t.bindable],{enumerable:!0,initializer:null}),u(d.prototype,"draggingMe",[r],Object.getOwnPropertyDescriptor(d.prototype,"draggingMe"),d.prototype),a=d))||a)}),define("text!examples/e6-reorder-list/item.css",[],function(){return".e6-list-flex-item {\n  position: relative;\n  display: block;\n  background-color: white;\n  border: 1px solid #333;\n  width: 100%;\n  padding: 10px;\n  box-sizing: border-box;\n  font-size: 14px;\n}\n\n.e6-list-flex-item:not(:last-child) {\n  margin-bottom: -1px;\n}\n\n.e6-list-flex-item.dragging {\n  background-color: lightgrey;\n}\n"}),define("text!examples/e6-reorder-list/item.html",[],function(){return"<template ref=\"dndElement\" class=\"e6-list-flex-item ${draggingMe ? 'dragging' : ''}\">\n  <require from=\"./item.css\"></require>\n\n  \x3c!-- cannot use show.bind here, it changes outer element size--\x3e\n  \x3c!-- use visibility: hidden; to retain size --\x3e\n  <span css=\"visibility: ${draggingMe ? 'hidden': 'inherit'}\">${item.value}</span>\n</template>\n"}),define("examples/e6-reorder-list/list-container",["exports","aurelia-framework","bcx-aurelia-dnd","aurelia-event-aggregator","lodash"],function(e,t,n,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ListContainer=void 0;var r,a=(r=i)&&r.__esModule?r:{default:r};var d,s,c,l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var p,m,h,f,b,v;e.ListContainer=(d=(0,t.inject)(n.DndService,o.EventAggregator),s=(0,t.computedFrom)("items","intention"),d((l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{id:"0",value:"lorem"},{id:"1",value:"Lorem ipsum dolor sit amet. consectetur adipisicing elit."},{id:"2",value:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eos, tempore."},{id:"3",value:"Lorem ipsum dolor sit amet, consectetur."}],this.dndService=t,this.ea=n}return e.prototype.attached=function(){var e=this;this.subscribers=[this.ea.subscribe("dnd:willStart",function(){return e.resetIntention()}),this.ea.subscribe("dnd:didEnd",function(){return e.fulfillIntention()})]},e.prototype.detached=function(){this.subscribers.forEach(function(e){return e.dispose()})},e.prototype.resetIntention=function(){this.intention=null},e.prototype.updateIntention=function(e,t){var n=this.dndService,o=n.isProcessing,i=n.model;if(o&&"orderItemFlex"===i.type){var r=this.patchedItems,d=a.default.findIndex(r,{id:e});if(!(d<0)){var s=void 0,c=void 0,l=void 0;if(this.intention)s=this.intention.fromIndex,c=this.intention.toIndex;else{if((s=a.default.findIndex(r,{id:i.id}))<0)return;c=s}l=c<d?t?d-1:d:t?d:d+1,this.intention={fromIndex:s,toIndex:l}}}},e.prototype.fulfillIntention=function(){if(this.intention){var e=this.intention,t=e.fromIndex,n=e.toIndex;if(this.resetIntention(),t!==n){var o=this.items[t];this.items.splice(t,1),this.items.splice(n,0,o)}}},u(e,[{key:"patchedItems",get:function(){var e=this.items;if(!this.intention)return e;var t=this.intention,n=t.fromIndex,o=t.toIndex,i=[].concat(e),r=this.items[n];return i.splice(n,1),i.splice(o,0,r),i}}]),e}(),p=l.prototype,m="patchedItems",h=[s],f=Object.getOwnPropertyDescriptor(l.prototype,"patchedItems"),b=l.prototype,v={},Object.keys(f).forEach(function(e){v[e]=f[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=h.slice().reverse().reduce(function(e,t){return t(p,m,e)||e},v),b&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(b):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(p,m,v),v=null),c=l))||c)}),define("text!examples/e6-reorder-list/list-container.css",[],function(){return".e6-list-container {\n  width: 200px;\n  margin: 5px;\n  padding: 0;\n}"}),define("text!examples/e6-reorder-list/list-container.html",[],function(){return'<template>\n  <require from="./list-container.css"></require>\n  <require from="./item"></require>\n\n  <ul ref="dndElement" class="e6-list-container">\n    <li as-element="item" repeat.for="item of patchedItems" item.bind="item" update-intention.call="updateIntention(targetId, beforeTarget)"></li>\n  </ul>\n</template>\n'}),define("examples/e7-move-and-resize/box",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box=void 0;var o,i,r,a,d,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function c(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}e.Box=(o=(0,t.inject)(n.DndService),i=(0,t.computedFrom)("item","item.x","item.y","item.width","item.height"),o((a=function(){function e(t){var n,o,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o="item",r=this,(i=d)&&Object.defineProperty(n,o,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0}),this.dndService=t}return e.prototype.attached=function(){this.dndService.addSource(this,{noPreview:!0})},e.prototype.detached=function(){this.dndService.removeSource(this)},e.prototype.dndModel=function(){return{type:"moveItem",id:this.item.id}},s(e,[{key:"positionCss",get:function(){return{left:(this.item&&this.item.x||0)+"px",top:(this.item&&this.item.y||0)+"px",width:(this.item&&this.item.width||0)+"px",height:(this.item&&this.item.height||0)+"px"}}}]),e}(),d=c(a.prototype,"item",[t.bindable],{enumerable:!0,initializer:null}),c(a.prototype,"positionCss",[i],Object.getOwnPropertyDescriptor(a.prototype,"positionCss"),a.prototype),r=a))||r)}),define("text!examples/e7-move-and-resize/box.css",[],function(){return".e7-example-box {\n  position: absolute;\n  cursor: pointer;\n  box-sizing: border-box;\n  border: 1px solid #555;\n  background: white;\n  line-height: 1;\n}\n\n\n.e7-example-box .item-resize {\n  position: absolute;\n  display: block;\n}\n\n/* just for demo */\n.e7-show-resize-area .item-resize {\n  background-color: rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  outline: 1px solid gray;\n}\n\n\n.e7-example-box .item-resize.item-resize-n {\n  top: -4px;\n  height: 14px;\n  left: 10px;\n  right: 10px;\n  cursor: ns-resize;\n}\n\n.e7-example-box .item-resize.item-resize-e {\n  right: -4px;\n  width: 14px;\n  top: 10px;\n  bottom: 10px;\n  cursor: ew-resize;\n}\n\n.e7-example-box .item-resize.item-resize-s {\n  bottom: -4px;\n  height: 14px;\n  left: 10px;\n  right: 10px;\n  cursor: ns-resize;\n}\n\n.e7-example-box .item-resize.item-resize-w {\n  left: -4px;\n  width: 14px;\n  top: 10px;\n  bottom: 10px;\n  cursor: ew-resize;\n}\n\n.e7-example-box .item-resize.item-resize-ne {\n  top: -4px;\n  right: -4px;\n  width: 14px;\n  height: 14px;\n  cursor: nesw-resize;\n}\n\n.e7-example-box .item-resize.item-resize-sw {\n  bottom: -4px;\n  left: -4px;\n  width: 14px;\n  height: 14px;\n  cursor: nesw-resize;\n}\n\n.e7-example-box .item-resize.item-resize-nw {\n  top: -4px;\n  left: -4px;\n  width: 14px;\n  height: 14px;\n  cursor: nwse-resize;\n}\n\n.e7-example-box .item-resize.item-resize-se {\n  bottom: -4px;\n  right: -4px;\n  width: 14px;\n  height: 14px;\n  cursor: nwse-resize;\n}\n"}),define("text!examples/e7-move-and-resize/box.html",[],function(){return"<template>\n  <require from=\"./box.css\"></require>\n  <require from=\"./resize-corner\"></require>\n\n  <div\n    ref=\"dndElement\"\n    class=\"e7-example-box\"\n    style.bind=\"positionCss\"\n  >\n    ${item.name}\n\n    <resize-corner\n      repeat.for=\"mode of ['e', 'se', 's', 'sw', 'w', 'nw', 'n', 'ne']\"\n      mode.bind=\"mode\"\n      item-id.bind=\"item.id\">\n    </resize-corner>\n  </div>\n</template>"}),define("examples/e7-move-and-resize/container",["exports","aurelia-framework","bcx-aurelia-dnd","aurelia-event-aggregator","lodash"],function(e,t,n,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var r,a=(r=i)&&r.__esModule?r:{default:r};var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var s,c,l,u,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var m,h,f,b,v,g;e.Container=(s=(0,t.inject)(n.DndService,o.EventAggregator),c=(0,t.computedFrom)("items","intention"),s((u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.showResizeArea=!1,this.items=[{id:"a",name:"A",x:20,y:20,width:80,height:50},{id:"b",name:"B",x:50,y:200,width:80,height:50},{id:"c",name:"C",x:200,y:100,width:80,height:50}],this.dndService=t,this.ea=n}return e.prototype.attached=function(){var e=this;this.dndService.addTarget(this),this.subscribers=[this.ea.subscribe("dnd:willStart",function(){return e.resetIntention()}),this.ea.subscribe("dnd:didEnd",function(){return e.resetIntention()})]},e.prototype.detached=function(){this.dndService.removeTarget(this),this.subscribers.forEach(function(e){return e.dispose()})},e.prototype.dndCanDrop=function(e){return"moveItem"===e.type||"resizeItem"===e.type},e.prototype.dndDrop=function(){var e=this.items,t=this.intention;if(t){var n=a.default.findIndex(e,{id:t.id});if(n>=0){var o=e[n];e.splice(n,1),e.push(d({},o,{x:t.x,y:t.y,width:t.width,height:t.height}))}}},e.prototype.dndHover=function(e){var t=e.mouseStartAt,n=e.mouseEndAt,o=e.previewElementRect,i=e.targetElementRect,r=this.dnd.model,d=a.default.find(this.items,{id:r.id});if(d)if("moveItem"===r.type){var s={x:o.x-i.x,y:o.y-i.y};this.intention={id:r.id,x:s.x,y:s.y,width:d.width,height:d.height}}else if("resizeItem"===r.type){var c={x:Math.round(n.x-t.x),y:Math.round(n.y-t.y)},l={id:r.id,x:d.x,y:d.y,width:d.width,height:d.height};a.default.each(r.resize,function(e){switch(e){case"n":c.y>l.height-30&&(c.y=l.height-30),l.y+=c.y,l.height-=c.y;break;case"s":c.y<30-l.height&&(c.y=30-l.height),l.height+=c.y;break;case"w":c.x>l.width-30&&(c.x=l.width-30),l.x+=c.x,l.width-=c.x;break;case"e":c.x<30-l.width&&(c.x=30-l.width),l.width+=c.x}}),this.intention=l}},e.prototype.resetIntention=function(){this.intention=null},p(e,[{key:"patchedItems",get:function(){var e=this.items,t=this.intention;if(!t)return e;var n=a.default.reject(e,{id:t.id}),o=a.default.find(this.items,{id:t.id});return o&&n.push(d({},o,{x:t.x,y:t.y,width:t.width,height:t.height})),n}}]),e}(),m=u.prototype,h="patchedItems",f=[c],b=Object.getOwnPropertyDescriptor(u.prototype,"patchedItems"),v=u.prototype,g={},Object.keys(b).forEach(function(e){g[e]=b[e]}),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=f.slice().reverse().reduce(function(e,t){return t(m,h,e)||e},g),v&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(v):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(m,h,g),g=null),l=u))||l)}),define("text!examples/e7-move-and-resize/container.css",[],function(){return".e7-example-container {\n  position: relative;\n  box-sizing: border-box;\n  width: 300px;\n  height: 300px;\n  border: 1px solid #555;\n  overflow: hidden;\n}"}),define("text!examples/e7-move-and-resize/container.html",[],function(){return'<template>\n  <require from="./container.css"></require>\n  <require from="./box"></require>\n\n  <label><input type="checkbox" checked.bind="showResizeArea"> show resize area (for demonstration)</label>\n  <div ref="dndElement" class="e7-example-container ${showResizeArea ? \'e7-show-resize-area\' : \'\'}">\n    <box repeat.for="item of patchedItems" item.bind="item"></box>\n  </div>\n</template>\n'}),define("examples/e7-move-and-resize/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/e7-move-and-resize/container.js","src/examples/e7-move-and-resize/container.html","src/examples/e7-move-and-resize/container.css","src/examples/e7-move-and-resize/box.js","src/examples/e7-move-and-resize/box.html","src/examples/e7-move-and-resize/box.css","src/examples/e7-move-and-resize/resize-corner.html","src/examples/e7-move-and-resize/resize-corner.js"]}}),define("text!examples/e7-move-and-resize/index.html",[],function(){return'<template>\n  <require from="./container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <container></container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/e7-move-and-resize/resize-corner",["exports","aurelia-framework","bcx-aurelia-dnd"],function(e,t,n){"use strict";function o(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function i(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var r,a,d,s;Object.defineProperty(e,"__esModule",{value:!0}),e.ResizeCorner=void 0;e.ResizeCorner=(0,t.inject)(n.DndService)((a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"mode",d,this),o(this,"itemId",s,this),this.dndService=t}return e.prototype.attached=function(){this.dndService.addSource(this,{noPreview:!0})},e.prototype.detached=function(){this.dndService.removeSource(this)},e.prototype.dndModel=function(){return{type:"resizeItem",id:this.itemId,resize:this.mode}},e}(),d=i(a.prototype,"mode",[t.bindable],{enumerable:!0,initializer:function(){return"n"}}),s=i(a.prototype,"itemId",[t.bindable],{enumerable:!0,initializer:function(){return""}}),r=a))||r}),define("text!examples/e7-move-and-resize/resize-corner.html",[],function(){return'<template class="item-resize item-resize-${mode}" ref="dndElement">\n</template>\n'}),define("examples/er1-reorderable-repeat/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/er1-reorderable-repeat/list-container.js","src/examples/er1-reorderable-repeat/list-container.html","src/examples/er1-reorderable-repeat/list-container.css","src/examples/er1-reorderable-repeat/list-container2.js","src/examples/er1-reorderable-repeat/list-container2.html"]}}),define("text!examples/er1-reorderable-repeat/index.html",[],function(){return'<template>\n  <require from="./list-container"></require>\n  <require from="./list-container2"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app" style="display:flex">\n      <list-container></list-container>\n      <list-container2></list-container2>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/er1-reorderable-repeat/list-container",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ListContainer=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=["first","second","third","fourth"]}}),define("text!examples/er1-reorderable-repeat/list-container.css",[],function(){return".er1-list-container {\n  width: 200px;\n  margin: 5px;\n}\n\n.er1-list-item {\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #333;\n  width: 100%;\n  height: 50px;\n  text-align: center;\n  line-height: 50px;\n  overflow: hidden;\n  background: white;\n}\n\n.er1-list-item:not(:first-child) {\n  margin-top: -1px;\n}\n"}),define("text!examples/er1-reorderable-repeat/list-container.html",[],function(){return'<template>\n  <require from="./list-container.css"></require>\n\n  <p>Array of strings</p>\n\n  <div class="er1-list-container">\n    <div class="er1-list-item" reorderable-repeat.for="item of items">\n      ${item}\n    </div>\n  </div>\n</template>\n'}),define("examples/er1-reorderable-repeat/list-container2",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ListContainer2=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{id:"0",value:"first"},{id:"1",value:"second"},{id:"2",value:"third"},{id:"3",value:"fourth"}]}}),define("text!examples/er1-reorderable-repeat/list-container2.html",[],function(){return'<template>\n  <require from="./list-container.css"></require>\n\n  <p>Array of objects</p>\n\n  <div class="er1-list-container">\n    <div class="er1-list-item" reorderable-repeat.for="item of items">\n      #${item.id} ${item.value}\n    </div>\n  </div>\n</template>\n'}),define("examples/er2-reorderable-repeat-customise-style/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/er2-reorderable-repeat-customise-style/list-container.css","src/examples/er2-reorderable-repeat-customise-style/list-container.js","src/examples/er2-reorderable-repeat-customise-style/list-container.html","src/examples/er2-reorderable-repeat-customise-style/list-container2.js","src/examples/er2-reorderable-repeat-customise-style/list-container2.html"]}}),define("text!examples/er2-reorderable-repeat-customise-style/index.html",[],function(){return'<template>\n  <require from="./list-container"></require>\n  <require from="./list-container2"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app" style="display:flex">\n      <list-container></list-container>\n      <list-container2></list-container2>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/er2-reorderable-repeat-customise-style/list-container",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ListContainer=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=["first","second","third","fourth"]}}),define("text!examples/er2-reorderable-repeat-customise-style/list-container.css",[],function(){return".er2-list-container {\n  width: 200px;\n  margin: 5px;\n}\n\n.reorderable-repeat-dragging-me.er2-list-item {\n  visibility: visible; /* unset visibility: hidden */\n  color: transparent; /* hide text */\n  background: linear-gradient(to right, lightgrey, white, lightgrey);\n}\n\n.er2-list-item {\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #333;\n  width: 100%;\n  height: 50px;\n  text-align: center;\n  line-height: 50px;\n  overflow: hidden;\n  background: white;\n}\n\n.er2-list-item:not(:first-child) {\n  margin-top: -1px;\n}\n"}),define("text!examples/er2-reorderable-repeat-customise-style/list-container.html",[],function(){return'<template>\n  <require from="./list-container.css"></require>\n\n  <p>Array of strings</p>\n\n  <div class="er2-list-container">\n    <div class="er2-list-item" reorderable-repeat.for="item of items">\n      ${item}\n    </div>\n  </div>\n</template>\n'}),define("examples/er2-reorderable-repeat-customise-style/list-container2",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ListContainer2=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{id:"0",value:"first"},{id:"1",value:"second"},{id:"2",value:"third"},{id:"3",value:"fourth"}]}}),define("text!examples/er2-reorderable-repeat-customise-style/list-container2.html",[],function(){return'<template>\n  <require from="./list-container.css"></require>\n\n  <p>Array of objects</p>\n\n  <div class="er2-list-container">\n    <div class="er2-list-item" reorderable-repeat.for="item of items">\n      #${item.id} ${item.value}\n    </div>\n  </div>\n</template>\n'}),define("examples/er3-reorderable-repeat-with-handler/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/er3-reorderable-repeat-with-handler/table-container.html","src/examples/er3-reorderable-repeat-with-handler/table-container.js","src/examples/er3-reorderable-repeat-with-handler/table-container.css"]}}),define("text!examples/er3-reorderable-repeat-with-handler/index.html",[],function(){return'<template>\n  <require from="./table-container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <table-container></table-container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/er3-reorderable-repeat-with-handler/table-container",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TableContainer=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{name:"Bob",age:23},{name:"Ali",age:37},{name:"Tom",age:12},{name:"Emma",age:18}]}}),define("text!examples/er3-reorderable-repeat-with-handler/table-container.css",[],function(){return"table.table-container {\n  width: 100%;\n  background-color: white;\n  border-spacing: 0;\n}\n\ntable.table-container tr th {\n  border-bottom: 2px solid #555;\n}\n\ntable.table-container tr td {\n  border-bottom: 1px solid #555;\n}\n\ntable.table-container tr th,\ntable.table-container tr td {\n  text-align: left;\n  padding: 0.5rem;\n}\n\ntable.table-container tr.dragging td {\n  background-color: lightgrey;\n  color: lightgrey;\n}\n\ntable.table-container tr td .handler {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  box-sizing: border-box;\n  border: 1px solid #333;\n  cursor: pointer;\n}\n\ntable.table-container tr.reorderable-repeat-dragging-me {\n  visibility: visible;\n}\n\ntable.table-container tr.reorderable-repeat-dragging-me td {\n  background-color: lightgrey;\n  color: transparent;\n}\n\ntable.table-container tr.reorderable-repeat-dragging-me td .handler {\n  visibility: hidden;\n}"}),define("text!examples/er3-reorderable-repeat-with-handler/table-container.html",[],function(){return'<template>\n  <require from="./table-container.css"></require>\n  <table class="table-container">\n    <thead>\n      <tr><th></th><th>Name</th><th>Age</th>\n      </tr>\n    </thead>\n    <tbody ref="tableBody">\n      <tr reorderable-repeat.for="item of items"\n          reorderable-dnd-handler-selector=".handler">\n        <td style="width:30px;"><div class="handler"></div></td>\n        <td>${item.name}</td>\n        <td>${item.age}</td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n'}),define("examples/er4-reorderable-repeat-customise-preview/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/er4-reorderable-repeat-customise-preview/table-container.html","src/examples/er4-reorderable-repeat-customise-preview/table-container.js","src/examples/er4-reorderable-repeat-customise-preview/table-container.css"]}}),define("text!examples/er4-reorderable-repeat-customise-preview/index.html",[],function(){return'<template>\n  <require from="./table-container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <table-container></table-container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/er4-reorderable-repeat-customise-preview/table-container",["exports","jquery"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TableContainer=void 0;var n,o=(n=t)&&n.__esModule?n:{default:n};e.TableContainer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=[{name:"Bob",age:23},{name:"Ali",age:37},{name:"Tom",age:12},{name:"Emma",age:18}]}return e.prototype.drawPreview=function(e){var t=(0,o.default)('<div class="er4-drag-person"></div>');return t.text(e.name),t.get(0)},e.prototype.orderChanged=function(e,t){console.log("Ordered items: "+JSON.stringify(e)),console.log("Change: "+JSON.stringify(t))},e}()}),define("text!examples/er4-reorderable-repeat-customise-preview/table-container.css",[],function(){return"table.table-container {\n  width: 100%;\n  background-color: white;\n  border-spacing: 0;\n}\n\ntable.table-container tr th {\n  border-bottom: 2px solid #555;\n}\n\ntable.table-container tr td {\n  border-bottom: 1px solid #555;\n}\n\ntable.table-container tr th,\ntable.table-container tr td {\n  text-align: left;\n  padding: 0.5rem;\n}\n\ntable.table-container tr.dragging td {\n  background-color: lightgrey;\n  color: lightgrey;\n}\n\ntable.table-container tr td .handler {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  box-sizing: border-box;\n  border: 1px solid #333;\n  cursor: pointer;\n}\n\ntable.table-container tr.reorderable-repeat-dragging-me {\n  visibility: visible;\n}\n\ntable.table-container tr.reorderable-repeat-dragging-me td {\n  background-color: lightgrey;\n  color: transparent;\n}\n\ntable.table-container tr.reorderable-repeat-dragging-me td .handler {\n  visibility: hidden;\n}\n\n.er4-drag-person {\n  background-color: #5D99BD;\n  color: white;\n  padding: 0.5rem;\n  cursor: default;\n}"}),define("text!examples/er4-reorderable-repeat-customise-preview/table-container.html",[],function(){return'<template>\n  <require from="./table-container.css"></require>\n  <table class="table-container">\n    <thead>\n      <tr><th></th><th>Name</th><th>Age</th>\n      </tr>\n    </thead>\n    <tbody ref="tableBody">\n      <tr reorderable-repeat.for="item of items"\n          reorderable-dnd-handler-selector=".handler"\n          reorderable-dnd-preview="drawPreview"\n          reorderable-after-reordering="orderChanged">\n        <td style="width:30px;"><div class="handler"></div></td>\n        <td>${item.name}</td>\n        <td>${item.age}</td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n'}),define("examples/er5-reorderable-repeat-direction/container",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Container=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.leftToRight=["L0","L1","L2"],this.rightToLeft=["R0","R1","R2"]}}),define("text!examples/er5-reorderable-repeat-direction/container.css",[],function(){return".er5-floats-container {\n  overflow: hidden;\n  width: 100%;\n  max-width: 400px;\n}\n\n.er5-float-left, .er5-float-right {\n  margin: 0.2rem;\n  border: 1px dashed grey;\n  padding: 0.5rem;\n  cursor: pointer;\n}\n\n.er5-float-left {\n  float: left;\n}\n\n.er5-float-right {\n  float: right;\n}"}),define("text!examples/er5-reorderable-repeat-direction/container.html",[],function(){return'<template>\n  <require from="./container.css"></require>\n\n  <div class="er5-floats-container">\n    <div\n      class="er5-float-left"\n      reorderable-repeat.for="unit of leftToRight"\n      reorderable-direction="right"\n    >\n      ${unit}\n    </div>\n  </div>\n\n  <div class="er5-floats-container">\n   <div\n      class="er5-float-right"\n      reorderable-repeat.for="unit of rightToLeft"\n      reorderable-direction="left"\n    >\n      ${unit}\n    </div>\n  </div>\n</template>\n'}),define("examples/er5-reorderable-repeat-direction/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/er5-reorderable-repeat-direction/container.html","src/examples/er5-reorderable-repeat-direction/container.js","src/examples/er5-reorderable-repeat-direction/container.css"]}}),define("text!examples/er5-reorderable-repeat-direction/index.html",[],function(){return'<template>\n  <require from="./container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app">\n      <container></container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/er6-multi-lists/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/er6-multi-lists/list-container.html","src/examples/er6-multi-lists/list-container.js","src/examples/er6-multi-lists/list-container.css"]}}),define("text!examples/er6-multi-lists/index.html",[],function(){return'<template>\n  <require from="./list-container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app" style="display:flex">\n      <list-container></list-container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/er6-multi-lists/list-container",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ListContainer=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numbers=[0,1,2],this.letters=["a","b"]}}),define("text!examples/er6-multi-lists/list-container.css",[],function(){return".er6-list-container {\n  display: flex;\n  align-items: start;\n  width: 250px;\n  margin: 5px;\n}\n\n.er6-list {\n  flex: 1 1 0;\n  margin: 10px;\n  padding: 10px;\n  background-color: #eee;\n}\n\n.er6-list-item {\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #888;\n  height: 40px;\n  text-align: center;\n  line-height: 40px;\n  overflow: hidden;\n  background: white;\n}\n\n.er6-list-item:not(:first-child) {\n  margin-top: -1px;\n}\n\n.er6-list-item.reorderable-repeat-dragging-me {\n  visibility: visible; /* unset visibility: hidden */\n  color: transparent; /* hide text */\n  background-color: #ddd;\n}\n"}),define("text!examples/er6-multi-lists/list-container.html",[],function(){return'<template>\n  <require from="./list-container.css"></require>\n\n  <div class="er6-list-container">\n    <div class="er6-list">\n      Numbers\n      <div\n        class="er6-list-item"\n        reorderable-repeat.for="item of numbers"\n        reorderable-group="er6">\n        ${item}\n      </div>\n    </div>\n    <div class="er6-list">\n      Letters\n      <div\n        class="er6-list-item"\n        reorderable-repeat.for="item of letters"\n        reorderable-group="er6">\n        ${item}\n      </div>\n    </div>\n  </div>\n</template>\n'}),define("examples/er7-multi-lists-with-group-for/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Index=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sources=["src/examples/er7-multi-lists-with-group-for/list-container.html","src/examples/er7-multi-lists-with-group-for/list-container.js","src/examples/er7-multi-lists-with-group-for/list-container.css"]}}),define("text!examples/er7-multi-lists-with-group-for/index.html",[],function(){return'<template>\n  <require from="./list-container"></require>\n\n  <div class="bcx-doc-demo">\n    <div class="demo-app" style="display:flex">\n      <list-container></list-container>\n    </div>\n    <div class="demo-code" as-element="display-sources" sources.bind="sources"></div>\n  </div>\n</template>\n'}),define("examples/er7-multi-lists-with-group-for/list-container",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ListContainer=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numbers=[0,1,2],this.letters=["a","b"]}}),define("text!examples/er7-multi-lists-with-group-for/list-container.css",[],function(){return".er7-list-container {\n  display: flex;\n  align-items: start;\n  width: 250px;\n  margin: 5px;\n}\n\n.er7-list {\n  flex: 1 1 0;\n  margin: 10px;\n  padding: 10px;\n  background-color: #eee;\n}\n\n.er7-list-item {\n  display: block;\n  box-sizing: border-box;\n  border: 1px solid #888;\n  height: 40px;\n  text-align: center;\n  line-height: 40px;\n  overflow: hidden;\n  background: white;\n}\n\n.er7-list-item:not(:first-child) {\n  margin-top: -1px;\n}\n\n.er7-list-item.reorderable-repeat-dragging-me {\n  visibility: visible; /* unset visibility: hidden */\n  color: transparent; /* hide text */\n  background-color: #ddd;\n}\n"}),define("text!examples/er7-multi-lists-with-group-for/list-container.html",[],function(){return'<template>\n  <require from="./list-container.css"></require>\n\n  <div class="er7-list-container">\n    <div class="er7-list" reorderable-group-for.bind="numbers">\n      Numbers\n      <div\n        class="er7-list-item"\n        reorderable-repeat.for="item of numbers"\n        reorderable-group="er7">\n        ${item}\n      </div>\n    </div>\n    <div class="er7-list" reorderable-group-for.bind="letters">\n      Letters\n      <div\n        class="er7-list-item"\n        reorderable-repeat.for="item of letters"\n        reorderable-group="er7">\n        ${item}\n      </div>\n    </div>\n  </div>\n</template>\n'}),define("main",["exports","./environment"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.configure=function(e){e.use.standardConfiguration().feature("resources").developmentLogging(o.default.debug?"info":"warn").plugin("bcx-doc-base").plugin("bcx-aurelia-reorderable-repeat"),o.default.testing&&e.use.plugin("aurelia-testing");e.start().then(function(){return e.setRoot()})};var n,o=(n=t)&&n.__esModule?n:{default:n}}),define("text!more-examples.html",[],function(){return'<template><h1 id="need-more-examples-">Need more examples?</h1>\n<p><a href="https://github.com/buttonwoodcx/bcx-aurelia-dnd/issues">Create an issue on github</a> I will be happy to help :-)</p>\n</template>'}),define("text!not-found.html",[],function(){return'<template><h2 id="page-not-found-">Page not found :-(</h2>\n</template>'}),define("resources/index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.configure=function(e){}}),define("text!tutorial/api.html",[],function(){return'<template><h2 id="dndservice-api-reference">DndService API Reference</h2>\n<p><code>DndService</code> is the single class provided in <code>bcx-aurelia-dnd</code>. Technically, it can work with any front-end framework.</p>\n<blockquote>\n<p>in Aurelia app, use dependency injection to create shared singleton instance.</p>\n</blockquote>\n<blockquote>\n<p>in other kind of app, create a shared instance for the whole app to share.</p>\n</blockquote>\n<h3 id="dndservice-constructor">DndService Constructor</h3>\n<p>You don&#39;t need to use constructor in Aurelia app.</p>\n<div><code-viewer value="const dndService = new DndService();" mode="js"></code-viewer></div>\n\n<blockquote>\n<p>return an instance created without Aurelia Event Aggregator support. Events <code>&#39;dnd:willStart&#39;</code>, <code>&#39;dnd:didStart&#39;</code>, <code>&#39;dnd:willEnd&#39;</code>, <code>&#39;dnd:willEnd&#39;</code> would not fire.</p>\n</blockquote>\n<div><code-viewer value="import {EventAggregator} from \'aurelia-event-aggregator\';\nconst sharedEa = new EventAggregator();\nconst dndService = new DndService(sharedEa);" mode="js"></code-viewer></div>\n\n<blockquote>\n<p>return an instance created with Aurelia Event Aggregator support. Use <code>sharedEa</code> to subscribe to events.</p>\n</blockquote>\n<h2 id="published-events-through-aurelia-event-aggregator">Published events through Aurelia Event Aggregator</h2>\n<blockquote>\n<p><code>dnd:willStart</code>, just before starting of DnD session, all <code>isProcessing</code>, <code>model</code>, <code>isHovering</code> ... are still <code>undefined</code>.</p>\n</blockquote>\n<blockquote>\n<p><code>dnd:didStart</code>, just after starting of DnD session, all <code>isProcessing</code>, <code>model</code>, <code>isHovering</code> ... have been set. But none of any targets received <code>dndHover()</code> / <code>dndDrop()</code> callback.</p>\n</blockquote>\n<blockquote>\n<p><code>dnd:willEnd</code>, just before end of a DnD session, all <code>isProcessing</code>, <code>model</code>, <code>isHovering</code> ... are still set. Just before a target (if there is valid one with canDrop:true under the mouse) receives <code>dndDrop()</code> callback.</p>\n</blockquote>\n<blockquote>\n<p><code>dnd:didEnd</code>, after a DnD session finished. all <code>isProcessing</code>, <code>model</code>, ... are set to <code>undefined</code>. Final <code>dndDrop()</code> callback has been fired if there is a valid target.</p>\n</blockquote>\n<h3 id="dndservice-isprocessing">dndService.isProcessing</h3>\n<blockquote>\n<p><code>true</code> during a DnD session. <code>undefined</code> when not in a DnD session.</p>\n</blockquote>\n<h3 id="dndservice-model">dndService.model</h3>\n<blockquote>\n<p>the <code>model</code> object cached from the result of <code>sourceDelegate.dndModel()</code>. <code>undefined</code> when not in a DnD session.</p>\n</blockquote>\n<h3 id="dndservice-addsource-delegate-options-">dndService.addSource(delegate, options)</h3>\n<blockquote>\n<p>typically called inside Aurelia component&#39;s <code>attached()</code> callback.</p>\n</blockquote>\n<h4 id="source-delegate">Source delegate</h4>\n<blockquote>\n<p>if <code>options.element</code> is absent, <code>delegate.dndElement</code> must be a DOM element, used for source element.</p>\n</blockquote>\n<blockquote>\n<p>if <code>options.element</code> is present, <code>delegate.dndElement</code> is ignored, <code>options.element</code> is used as source element.</p>\n</blockquote>\n<blockquote>\n<p><code>delegate.dndModel()</code>, mandatory. Called once, when DnD session starts. It needs to return a model describing the meaning of a drag. There is no requirement on the shape of returned model.</p>\n</blockquote>\n<blockquote>\n<p><code>delegate.dndPreview(model)</code>, optional. Called once, when DnD session starts. It needs to return a newly created DOM element, with reasonable size, and not yet attached to DOM tree. Input <code>model</code> is the cached result of <code>sourceDelegate.dndModel()</code>. It could also return null or undefined, in that case, <code>DndService</code> will fall back to use default preview.</p>\n</blockquote>\n<blockquote>\n<p>if <code>options.noPreview</code> is true, <code>delegate.dndPreview(model)</code> is ignored.</p>\n</blockquote>\n<h4 id="source-options-optional-">Source options (optional)</h4>\n<blockquote>\n<p><code>options.element</code>, manually pass a DOM element as source element, instead of default <code>delegate.dndElement</code>.</p>\n</blockquote>\n<blockquote>\n<p><code>options.handler</code>, a DOM element as drag handler. It should be a decedent of source element. It limits where drag can start, doesn&#39;t affect preview.</p>\n</blockquote>\n<blockquote>\n<p><code>options.noPreview</code>, turn off preview.</p>\n</blockquote>\n<blockquote>\n<p><code>options.hideCursor</code>, hide cursor during a DnD session.</p>\n</blockquote>\n<blockquote>\n<p><code>options.centerPreviewToMousePosition</code>, center preview to mouse position. Default preview position is aligned to source element top left corner.</p>\n</blockquote>\n<h3 id="dndservice-addtarget-delegate-options-">dndService.addTarget(delegate, options)</h3>\n<blockquote>\n<p>typically called inside Aurelia component&#39;s <code>attached()</code> callback.</p>\n</blockquote>\n<h4 id="target-delegate">Target delegate</h4>\n<blockquote>\n<p>if <code>options.element</code> is absent, <code>delegate.dndElement</code> must be a DOM element, used for target element.</p>\n</blockquote>\n<blockquote>\n<p>if <code>options.element</code> is present, <code>delegate.dndElement</code> is ignored, <code>options.element</code> is used as target element.</p>\n</blockquote>\n<blockquote>\n<p><code>delegate.dndCanDrop(model)</code>, mandatory. Called once, when DnD session starts. Input <code>model</code> is the cached result of <code>sourceDelegate.dndModel()</code>.</p>\n</blockquote>\n<blockquote>\n<p><code>delegate.dndDrop(location)</code>, mandatory. Called once, when DnD session ends (mouse released) on target element and <code>delegate.dnd.canDrop</code> is true.</p>\n</blockquote>\n<blockquote>\n<p><code>delegate.dndHover(location)</code>, optional. Called every time mouse moves during a DnD session, when <code>delegate.dnd.canDrop</code> is true and either <code>delegate.dnd.isHovering</code> or <code>delegate.dnd.isHoveringShallowly</code> is true.</p>\n</blockquote>\n<blockquote>\n<p>When two (or more) target elements overlap, and both have <code>delegate.dnd.canDrop</code> true, <code>dndHover()</code> could be called on both target delegates at same time, but <code>dndDrop()</code> would be only called on the top target.</p>\n</blockquote>\n<h4 id="dnd-property-on-target-delegate">dnd property on target delegate</h4>\n<blockquote>\n<p><code>dnd</code> property was created for every target delegate by <code>dndService</code>.</p>\n</blockquote>\n<blockquote>\n<p><code>delegate.dnd.isProcessing</code>, exactly same as <code>dndService.isProcessing</code>.</p>\n</blockquote>\n<blockquote>\n<p><code>delegate.dnd.model</code>, exactly same as <code>dndService.model</code>.</p>\n</blockquote>\n<blockquote>\n<p><code>delegate.dnd.canDrop</code>, cached result of <code>delegate.dndCanDrop(model)</code>. <code>undefined</code> when not in a DnD session.</p>\n</blockquote>\n<blockquote>\n<p><code>delegate.dnd.isHoveringShallowly</code>, <code>true</code> when mouse is hovering directly over target element. <code>undefined</code> when not in a DnD session.</p>\n</blockquote>\n<blockquote>\n<p><code>delegate.dnd.isHovering</code>, <code>true</code> when mouse is hovering within target element region. <code>undefined</code> when not in a DnD session.</p>\n</blockquote>\n<h4 id="target-options-optional-">Target options (optional)</h4>\n<blockquote>\n<p><code>options.element</code>, manually pass a DOM element as target element, instead of default <code>delegate.dndElement</code>.</p>\n</blockquote>\n<h4 id="location-payload-for-dndhover-location-and-dnddrop-location-">Location payload for dndHover(location) and dndDrop(location)</h4>\n<blockquote>\n<p><code>location.mouseStartAt</code>, drag start mouse location {x, y} (not {left, top}).</p>\n</blockquote>\n<blockquote>\n<p><code>location.mouseEndAt</code>, drop end mouse location {x, y} for <code>dndDrop()</code>, or current mouse location for <code>dndHover()</code>.</p>\n</blockquote>\n<blockquote>\n<p><code>location.sourceElementRect</code>, source element location and size {x, y, width, height}.</p>\n</blockquote>\n<blockquote>\n<p><code>location.previewElementRect</code>, preview element location and size {x, y, width, height}.</p>\n</blockquote>\n<blockquote>\n<p><code>location.targetElementRect</code>, target element location and size {x, y, width, height}.</p>\n</blockquote>\n<blockquote>\n<p>All <code>x</code> and <code>y</code>, are page offset (relative to whole HTML body), not client offset (relative to browser current view-port). Page offset is stabler to use than client offset, especially when there is scrolling or browser zooming.</p>\n</blockquote>\n<blockquote>\n<p>For convenience, <code>previewElementRect</code> always presents. Even if you turn off the preview, it still reports location and size as if you were using default preview.</p>\n</blockquote>\n<blockquote>\n<p><code>sourceElementRect</code> is not current location of source element. It is a cached location for the source element when DnD session started.</p>\n</blockquote>\n<h3 id="dndservice-removesource-delegateorelement-">dndService.removeSource(delegateOrElement)</h3>\n<h3 id="dndservice-removetarget-delegateorelement-">dndService.removeTarget(delegateOrElement)</h3>\n<blockquote>\n<p>typically called inside Aurelia component&#39;s <code>detached()</code> callback.</p>\n</blockquote>\n</template>'}),define("text!tutorial/customise-preview-and-source-handler.html",[],function(){return"<template><h1 id=\"customise-preview\">Customise preview</h1>\n<p>There are two situations you want to use customised preview.</p>\n<ol>\n<li>when the built-in preview drawer doesn&#39;t draw preview to your expectation, either due to css limitation or DOM hierarchy limitation.</li>\n<li>when you want a totally different preview, for instance, customise &quot;cursor&quot; during DnD session.</li>\n</ol>\n<p>DnD source <code>delegate</code> has an optional callback <code>dndPreview(model)</code> to draw customised preview. The input is the model generated by <code>dndModel()</code>, the output needs to be a DOM element (not attached to DOM tree yet).</p>\n<p>In this tutorial, we use jQuery (not required) to create DOM element.</p>\n<compose view-model=\"../examples/e3-customise-preview/index\"></compose>\n\n<p>For &quot;Box&quot; and &quot;Money&quot; buttons, we use <code>dndPreview()</code> to customise preview.</p>\n<blockquote>\n<p>In customised preview mode, <code>DndService</code> only sets <code>left</code> and <code>top</code> on the preview element, not <code>width</code> or <code>height</code>. You need to make sure your element has reasonable size.</p>\n</blockquote>\n<blockquote>\n<p>By default, preview is aligned to source element&#39;s top left corner.</p>\n</blockquote>\n<p>You can center your preview element around mouse position instead of aligning to source element top left corner. <code>dndService.addSource(this, {centerPreviewToMousePosition: true});</code></p>\n<p>This <code>centerPreviewToMousePosition</code> option works on both default preview and customised preview.</p>\n<p>There is one more option you can pass to <code>addSource()</code>, that is <code>hideCursor</code>, which is to hide cursor during a DnD session.</p>\n<blockquote>\n<p>Combine option <code>centerPreviewToMousePosition</code> with <code>hideCursor</code>, you are essentially using <code>dndPreview()</code> to draw a cursor replacement! That&#39;s what happened behind &quot;Money&quot; button.</p>\n</blockquote>\n<blockquote>\n<p>You could do conditional customising. In <code>dndPreview()</code> callback, return a DOM element when you need to customise preview, or return <code>null</code>/<code>undefined</code> when you want to fall back to default preview.</p>\n</blockquote>\n<h2 id=\"style-target-element-based-on-dnd-state\">Style target element based on DnD state</h2>\n<p>In the above example code, both boxes and container are DnD targets. They got some style change during a DnD session.</p>\n<p>Let&#39;s have a look on the implementation of box&#39;s property <code>dndCss</code>.</p>\n<div><code-viewer value=\"@computedFrom('dnd', 'dnd.model', 'dnd.isProcessing', 'dnd.canDrop', 'dnd.isHoveringShallowly')\nget dndCss() {\n  if (!this.dnd) return '';\n  const {model, isProcessing, canDrop, isHoveringShallowly} = this.dnd;\n  if (!isProcessing) return '';\n  // no style if moving item\n  if (model.type === 'moveItem') return '';\n  let css = '';\n  if (canDrop) {\n    css += 'can-drop';\n  } else {\n    css += 'can-not-drop';\n  }\n  if (isHoveringShallowly) css += ' shallow-hover';\n  return css;\n}\" mode=\"js\"></code-viewer></div>\n\n<p>It observes <code>dnd.isProcessing</code>, <code>dnd.model</code>, <code>dnd.canDrop</code> and <code>dnd.isHoveringShallowly</code>, set the right css class for box element. Thanks for Aurelia, all the style changes are updated automatically during a DnD session.</p>\n<h2 id=\"optional-source-handler\">Optional source handler</h2>\n<p>There is one more option for <code>addSource()</code>, you can pass a <code>handler</code> element in options. <code>handler</code> should be an DOM element within source element, it only limits where the drag can start, doesn&#39;t affect how preview was drawn.</p>\n<blockquote>\n<p>Default preview still clones source element, not handler element.</p>\n</blockquote>\n<blockquote>\n<p>Preview still aligns to source element, not handler element.</p>\n</blockquote>\n<h2 id=\"prevent-preview-to-show-some-parts\">Prevent preview to show some parts</h2>\n<p>You can mark parts of the source element with class <code>bcx-dnd-preview-hide</code> to prevent the part showing up in preview. For instance, mark edit button to hide it in preview.</p>\n<blockquote>\n<p>The default style for <code>bcx-dnd-preview-hide</code> is <code>visibility: hidden;</code>, not <code>display: none;</code>, this makes sure the hidden part doesn&#39;t affect the layout geometry.</p>\n</blockquote>\n<div><code-viewer value=\".bcx-dnd-preview .bcx-dnd-preview-hide {\n  visibility: hidden !important;\n}\" mode=\"css\"></code-viewer></div>\n\n<p>Here is an example for both source handler and bcx-dnd-preview-hide.</p>\n<compose view-model=\"../examples/e4-handler-move/index\"></compose>\n\n<p>That concludes all features of <code>bcx-aurelia-dnd</code>.</p>\n</template>"}),define("text!tutorial/dnd-preview.html",[],function(){return'<template><h1 id="dnd-preview">DnD Preview</h1>\n<p>During a DnD session, the &quot;image&quot; floating with you mouse is called <code>preview</code>. Before we move on to DnD target, let&#39;s have a brief look what happened with the preview when you drag a box.</p>\n<p>It&#39;s important to understand preview in order to understand its limitation.</p>\n<h2 id="how-preview-was-drawn">How preview was drawn</h2>\n<p>If using native HTML5 DnD API, the preview would be provided by browser automatically, you have little control of its appearance. Instead, as copied from dragula, <code>DndService</code> draws the preview &quot;image&quot; by creating a DOM element.</p>\n<ol>\n<li>first, it clones the source element to a preview element.</li>\n<li>add css class &quot;bcx-dnd-preview&quot; to the preview element. Most importantly this class sets <code>position: absolute !important;</code> on the preview.</li>\n<li>get calculated page offset and size of source element, apply them to preview&#39;s <code>left,top,width,height</code> styles. So that preview will appear at the exact same location of source element.</li>\n<li>append preview element directly to HTML body. This imposes limitation on css.</li>\n</ol>\n<div><code-viewer value=".bcx-dnd-preview {\n  position: absolute !important;\n  margin: 0 !important;\n  z-index: 9999 !important;\n  opacity: 0.8;\n  box-shadow: 0 0 16px gray;\n}" mode="css"></code-viewer></div>\n\n<blockquote>\n<p>Be clear, preview element lives outside of Aurelia. It&#39;s a static snapshot of source element.</p>\n</blockquote>\n<h2 id="css-limitation">CSS limitation</h2>\n<p>Because preview is directly under HTML body, you need to make sure source element&#39;s css class works directly under HTML body.</p>\n<p>If the source element&#39;s css is like <code>.example-container .example-box {...}</code>, the preview with class <code>.example-box</code> would not look right when <code>.example-container</code> is absent. If refactoring your css to fit <code>bcx-aurelia-dnd</code> is too much work, you can also <a href="#/customise-preview-and-source-handler">customize preview</a>.</p>\n<blockquote>\n<p><code>bcx-aurelia-dnd</code> style sheet (for <code>.bcx-dnd-preview</code> and others) was injected to the very top of HTML head. You can overwrite them in your style sheet, for instance, overwrite the <code>opacity</code> and <code>box-shadow</code> on <code>.bcx-dnd-preview</code>. You can also apply special style to one type of your preview with <code>.bcx-dnd-preview.example-box {...}</code>. Comparing to native HTML5 DnD API, we have much better control on preview.</p>\n</blockquote>\n<h2 id="hierarchy-limitation">Hierarchy limitation</h2>\n<p>You may wonder how would preview on <code>&lt;tr&gt;</code> ever works. A cloned <code>&lt;tr&gt;</code>would not work out of a table.</p>\n<blockquote>\n<p>Luckily, since v0.4.0, <code>bcx-aurelia-dnd</code> ships with some default preview drawers for <code>&lt;tr&gt;</code> and <code>&lt;li&gt;</code> elements, we copy their <code>&lt;table&gt;</code>/<code>&lt;ul&gt;</code>/<code>&lt;ol&gt;</code> wrapper and make some adjustment on width and height. You rarely need to go down to <a href="#/customise-preview-and-source-handler">customize preview</a> to deal with <code>&lt;tr&gt;</code> preview anymore.</p>\n</blockquote>\n<p>Let&#39;s move on to <a href="#/dnd-target">DnD Target</a>.</p>\n</template>'}),define("text!tutorial/dnd-source.html",[],function(){return'<template><h1 id="dnd-source">DnD Source</h1>\n<p>Influenced by <code>react-dnd</code>, we have concept of:</p>\n<ul>\n<li><strong>DnD source</strong>, a DOM element that you can drag, plus associated logic.</li>\n<li><strong>DnD target</strong>, a DOM element that you can drop onto, plus associated logic.</li>\n</ul>\n<p>Since the source and target are bound to DOM element, you need to register and deregister them in the right Aurelia life-cycle callback.</p>\n<blockquote>\n<p>The common practice is to do <code>addSource</code>/<code>addTarget</code> in <code>attached()</code>, and do <code>removeSource</code>/<code>removeTarget</code> in <code>detached()</code>.</p>\n</blockquote>\n<p>Let&#39;s implement our first example <a href="#/e1-simple-move">&quot;1. move object&quot;</a> step by step.</p>\n<p>There is a container of three boxes inside. To implement moving box, we register every box as a source which we want to drag, and register the container as the target which will receive a drop.</p>\n<h3 id="implement-source">Implement source</h3>\n<p>The box component.</p>\n<div><code-viewer value="export class Box {\n  //...\n  attached() {\n    this.dndService.addSource(this);\n  }\n\n  detached() {\n    this.dndService.removeSource(this);\n  }\n  //...\n}" mode="js"></code-viewer></div>\n\n<p><code>dndService.addSource(delegate, options)</code> takes two arguments.</p>\n<ul>\n<li>most of the time <code>delegate</code> object is your Aurelia component <code>addSource(this)</code>.</li>\n<li><code>options</code> is optional, we use it to alter default behaviour.</li>\n</ul>\n<p>The first thing that a source <code>delegate</code> needs to provide, is a reference to the DOM element we want to drag.</p>\n<blockquote>\n<p>By default, <code>DndService</code> get DOM element from <code>delegate.dndElement</code>. The easiest way to set that reference is to use <code>ref=&quot;dndElement&quot;</code> in your view template.</p>\n</blockquote>\n<div><code-viewer value="<template>\n  <require from=&quot;./box.css&quot;></require>\n\n  <div\n    ref=&quot;dndElement&quot;\n    class=&quot;example-box&quot;\n    style.bind=&quot;positionCss&quot;\n  >\n    \\${item.name}\n  </div>\n</template>" mode="html"></code-viewer></div>\n\n<blockquote>\n<p>When you use <code>ref=&quot;dndElement&quot;</code> in view template, Aurelia (not <code>DndService</code>) creates a property <code>dndElement</code> in your component pointing to the DOM element, you can access <code>this.dndElement</code> inside your component code.</p>\n</blockquote>\n<blockquote>\n<p>Note, <code>removeSource()</code> and <code>removeTarget()</code> can be called with either <code>delegate</code> object or element object. So in here, <code>this.dndService.removeSource(this.dndElement)</code> works same as <code>this.dndService.removeSource(this)</code>.</p>\n</blockquote>\n<p>Now DOM is hooked up, source <code>delegate</code> needs to provide <code>dndModel()</code> callback, it should return a model which describes the meaning of the drag.</p>\n<blockquote>\n<p>When <code>DndService</code> detected user started a drag, it asks (only once) the source <code>delegate</code> <code>dndModel()</code> callback to return a model.</p>\n</blockquote>\n<div><code-viewer value="export class Box {\n  //...\n  dndModel() {\n    return {\n      type: \'moveItem\',\n      item: this.item\n    };\n  }\n  //...\n}" mode="js"></code-viewer></div>\n\n<blockquote>\n<p><code>DndService</code> has zero requirement on the shape of the model. Even if you return <code>undefined</code>, <code>DndService</code> would not complain, although there is no practical usage of returning <code>undefined</code>.</p>\n</blockquote>\n<blockquote>\n<p>You should make your own convention of the model shape. A common practice is to provide a <code>type</code> in the model, which you can easily check against in other parts of your app.</p>\n</blockquote>\n<h3 id="here-is-what-we-got-so-far-movable-boxes">Here is what we got so far, movable boxes</h3>\n<p>There is no effect on drop, because we have not registered any DnD target yet.</p>\n<compose view-model="../examples/e1-simple-move-step-1/index"></compose>\n\n<p>Let&#39;s move on to understand <a href="#/dnd-preview">DnD Preview</a>.</p>\n</template>'}),define("text!tutorial/dnd-target.html",[],function(){return'<template><h1 id="dnd-target">DnD Target</h1>\n<h2 id="implement-target">Implement target</h2>\n<p>While source <code>delegate</code> has one mandatory method <code>dndModel()</code>, target <code>delegate</code> has two: <code>dndCanDrop(model)</code> and <code>dndDrop(location)</code>.</p>\n<ul>\n<li><code>dndCanDrop(model)</code> decides whether this target can be dropped onto.</li>\n<li><code>dndDrop(location)</code> is called when drop happened on this target. This is where you should finally mutate the state of your component. This callback will not be called if <code>dndCanDrop(model)</code> returned falsy.</li>\n</ul>\n<blockquote>\n<p>Note <code>dndDrop(location)</code> doesn&#39;t have <code>model</code> in the arguments, you get current DnD model from <code>this.dnd.model</code>. More explanation on <code>this.dnd</code> after following code snippet.</p>\n</blockquote>\n<div><code-viewer value="export class Container {\n  // ... add/removeTarget in attached/detached\n  // ... hook up dndElement in container.html\n\n  dndCanDrop(model) {\n    return model.type === \'moveItem\';\n  }\n\n  dndDrop(location) {\n    const {item} = this.dnd.model;\n    const {previewElementRect, targetElementRect} = location;\n    const newLoc = {\n      x: previewElementRect.x - targetElementRect.x,\n      y: previewElementRect.y - targetElementRect.y\n    };\n    item.x = newLoc.x;\n    item.y = newLoc.y;\n\n    // move the item to end of array, in order to show it above others\n    const idx = this.items.indexOf(item);\n    if (idx >= 0) {\n      this.items.splice(idx, 1);\n      this.items.push(item);\n    }\n  }\n}" mode="js"></code-viewer></div>\n\n<h3 id="injected-dnd-property">Injected <code>dnd</code> property</h3>\n<p>When a drag started, <code>DndService</code> got a model from source element (<code>dndModel()</code>), then use the model to ask (only once) every targets&#39; <code>dndCanDrop(model)</code>, it also injects a special property <code>dnd</code> onto target <code>delegate</code>.</p>\n<ul>\n<li><strong>dnd.isProcessing</strong>, <code>true</code> during a DnD session, no matter whether can drop on this target or not.</li>\n<li><strong>dnd.canDrop</strong>, a boolean, it&#39;s the cached result of <code>dndCanDrop(model)</code>.</li>\n<li><strong>dnd.model</strong>, the model of the DnD session, no matter whether can drop on this target or not.</li>\n<li><strong>dnd.isHoveringShallowly</strong>, <code>true</code> when mouse is hovering directly over target element.</li>\n<li><strong>dnd.isHovering</strong>, <code>true</code> when mouse is hovering within target element region.</li>\n<li>all of above have value <code>undefined</code> when not in a DnD session.</li>\n</ul>\n<p>Only when <code>canDrop</code> is true, the target delegate has chance of receiving <code>dndDrop(location)</code> callback.</p>\n<h3 id="location-argument"><code>location</code> argument</h3>\n<p>There are few objects in location argument for <code>dndDrop(location)</code>.</p>\n<ul>\n<li><strong>location.mouseStartAt</strong>, drag start mouse location {x, y} (not {left, top}).</li>\n<li><strong>location.mouseEndAt</strong>, drop end mouse location {x, y} for <code>dndDrop()</code>, or current mouse location for <code>dndHover()</code>.</li>\n<li><strong>location.sourceElementRect</strong>, source element location and size {x, y, width, height}.</li>\n<li><strong>location.previewElementRect</strong>, preview element location and size {x, y, width, height}.</li>\n<li><strong>location.targetElementRect</strong>, target element location and size {x, y, width, height}.</li>\n</ul>\n<blockquote>\n<p>All <code>x</code> and <code>y</code>, are page offset (relative to whole HTML body), not client offset (relative to browser current view-port). Page offset is stabler to use than client offset, especially when there is scrolling or browser zooming.</p>\n</blockquote>\n<blockquote>\n<p>For convenience, <code>previewElementRect</code> always presents. Even if you turn off the preview (you will see that in <a href="#/customise-preview-and-source-handler">customize preview</a>), it still reports location and size as if you were using default preview.</p>\n</blockquote>\n<p>Beware, <code>sourceElementRect</code> is not current location of source element. It is a cached location for the source element at the time when DnD session started.</p>\n<p>The reason behind this, is that <code>DndService</code> doesn&#39;t retain the source delegate/element during a DnD session. Even when the source was removed by <code>removeSource(...)</code> during a DnD session, <code>DndService</code> would not care. <code>DndService</code> gets the model, and caches source element location at start of a DnD session, that&#39;s the only time it ever uses that source delegate/element.</p>\n<blockquote>\n<p>In fact, <code>addSource()</code>, <code>removeSource()</code>, <code>addTarget()</code>, <code>removeTarget()</code> are <strong>all allowed any time</strong>, within or out of a DnD session. <code>DndService</code> thrives on dynamic behaviour. This will likely happen in your app without your notice, we will elaborate on this topic when examining <code>dndHover</code>.</p>\n</blockquote>\n<p>With that much code, we got movable boxes.</p>\n<compose view-model="../examples/e1-simple-move-step-2/index"></compose>\n\n<p>There is one more thing we want to fix. During dragging a box, the original source box still presents. How about hide the original box while dragging.</p>\n<h2 id="style-dnd-source-element">Style DnD Source Element</h2>\n<p>While DnD target <code>delegate</code> got special injected <code>dnd</code> property, DnD source <code>delegate</code> got none. But you can observe two properties directly on <code>dndService</code> instance: <code>isProcessing</code> and <code>model</code>.</p>\n<div><code-viewer value="export class Box {\n  //...\n  @computedFrom(\'dndService.isProcessing\', \'dndService.model\')\n  get draggingMe() {\n    return this.dndService.isProcessing &&\n           this.dndService.model.item === this.item;\n  }\n}" mode="js"></code-viewer></div>\n\n<blockquote>\n<p><code>dndService.isProcessing</code> and <code>dndService.model</code> are exactly same as DnD target <code>delegate</code>&#39;s <code>dnd.isProcessing</code> and <code>dnd.model</code>. In fact, you can use them as well in DnD target code.</p>\n</blockquote>\n<blockquote>\n<p>Here we use them to identify this box (DnD source) is being dragged.</p>\n</blockquote>\n<p>Hide the element when dragging, so user only sees the preview element during DnD session.</p>\n<div><code-viewer value="<template>\n  <require from=&quot;./box.css&quot;></require>\n\n  <div\n    ref=&quot;dndElement&quot;\n    class=&quot;example-box&quot;\n    style.bind=&quot;positionCss&quot;\n    show.bind=&quot;!draggingMe&quot;\n  >\n    \\${item.name}\n  </div>\n</template>" mode="html"></code-viewer></div>\n\n<blockquote>\n<p>Note we use <code>show.bind</code>, not <code>if.bind</code>. Aurelia <code>if.bind</code> adds/removes the element from DOM tree, while <code>show.bind</code> simply toggles css <code>visibility</code>. Because we have <code>ref=&quot;dndElement&quot;</code> on this DOM node, we really don&#39;t want <code>if.bind</code> dynamically adds/removes it.</p>\n</blockquote>\n<blockquote>\n<p>In Aurelia, it&#39;s a common practice to not put <code>ref</code> behind <code>if</code> or <code>repeat.for</code>.</p>\n</blockquote>\n<p>Now we got the full version of the first example.</p>\n<compose view-model="../examples/e1-simple-move/index"></compose>\n\n<h2 id="crosstalk">Crosstalk</h2>\n<p>If your computer screen is big enough to show both &quot;e1-simple-move-step-2&quot; and &quot;e1-simple-move&quot; demo apps within same frame (or you can use browser zoom-out to bring them into same screen), you can actually drag box from one app to the other, that generates cross-talk and can mutate the original box you dragged.</p>\n<blockquote>\n<p>This is because both demos has exactly same check in <code>dndCanDrop(model)</code>, <code>model.type === &#39;moveItem&#39;</code>.</p>\n</blockquote>\n<blockquote>\n<p>To avoid cross-talk in your app, design <code>dndModel()</code> and <code>dndCanDrop()</code> defensively for target to only respond to its interested source model. For instance, if we distinguish the <code>type</code> of two demos, set <code>type</code> to <code>moveItem-e1-step-1</code> and <code>moveItem-e1</code> respectively, we can eliminate crosstalk.</p>\n</blockquote>\n<p>Let&#39;s move on to <a href="#/turn-off-preview-use-hover">turn off preview, use dndHover</a>.</p>\n</template>'}),define("text!tutorial/faq.html",[],function(){return'<template><h1 id="faq">FAQ</h1>\n<h2 id="how-was-bcx-aurelia-dnd-created">How was <code>bcx-aurelia-dnd</code> created</h2>\n<p>In 2016, when we were converting our <a href="http://www.buttonwood.com.au/products/cloud-broker/cloud-broker/">Buttonwood Cloud Broker</a> front-end from React to Aurelia, one obstacle of the re-write is missing drag-and-drop library for our blueprint composer. Previously we were using <a href="http://react-dnd.github.io/react-dnd/">React DnD</a>, but there is no equivalent in Aurelia. There are plenty DOM based DnD libraries in JavaScript world, <a href="https://bevacqua.github.io/dragula/"><code>dragula</code></a> is the best in our eyes.</p>\n<p>We copied <code>dragula</code> code, removed all its DOM mutation code (we don&#39;t need that in Aurelia), made a working DnD library in one day. <code>bcx-aurelia-dnd</code> source code is largely unchanged since that first implementation.</p>\n<p>Thanks for Aurelia, <code>bcx-aurelia-dnd</code> implementation is very simple. The source code is about 700 lines of JavaScript, even most of it were copied from dragula to handle events and styling. As always, similar to most libraries, the <a href="https://github.com/buttonwoodcx/bcx-aurelia-dnd">source code</a> is way shorter than documentation.</p>\n<h2 id="why-based-on-dragula-not-native-html5-dnd-api">Why based on <code>dragula</code>, not native HTML5 DnD API</h2>\n<p><a href="https://bevacqua.github.io/dragula/">dragula</a> implements DnD in plain mouse/touch events, not in native HTML5 DnD API. <a href="https://www.danyow.net/drag-and-drop-with-aurelia/">Here</a> is the place where we were introduced to dragula, it has some links for issues around native HTML5 DnD API. It resonated with our experience on React DnD which uses native HTML5 DnD API. We had issues on nested source/target and some annoying browser behavior (cursor in IE) in native HTML5 DnD API. None of that affected our dragula based DnD.</p>\n<p>Another bonus of dragula, it supports mobile devices! All examples here works on iPad and phones.</p>\n<h2 id="why-bcx-aurelia-dnd-is-not-an-aurelia-plugin">Why bcx-aurelia-dnd is not an Aurelia plugin</h2>\n<p>Technically, <code>bcx-aurelia-dnd</code> doesn&#39;t depend on Aurelia, it only uses <code>aurelia-event-aggregator</code> to provide better integration with Aurelia. There is nothing preventing you from using it with other front-end frameworks or even vanilla JavaScript. But it&#39;s easier to use it inside Aurelia app, because of Aurelia&#39;s ability to observe changes on plain JavaScript properties.</p>\n</template>'}),define("text!tutorial/overview.html",[],function(){return'<template><h1 id="bcx-aurelia-dnd">bcx-aurelia-dnd</h1>\n<blockquote>\n<p>A generic drag-and-drop lib for <a href="https://aurelia.io">Aurelia</a>, works on both desktop and mobile, provides APIs fit in MVC/MVVM natively. The design is similar to <a href="http://react-dnd.github.io/react-dnd/"><code>react-dnd</code></a>.</p>\n</blockquote>\n<p>If you only want something using DnD to reorder a list, <a href="#/reorderable-repeat"><code>bcx-aurelia-reorderable-repeat</code></a> is a deadly simple Aurelia plugin based on bcx-aurelia-dnd.</p>\n<p>If you want to play with the source code of included examples.</p>\n<pre><code>git clone git@github.com:buttonwoodcx/doc-bcx-aurelia-dnd.git\ncd doc-bcx-aurelia-dnd\nnpm i -g aurelia-cli # if you have not installed aurelia-cli\nnpm i # yarn doesn&#39;t work because of https://github.com/yarnpkg/yarn/issues/5235\nau run --watch\n</code></pre><h2 id="we-use-dragula-algorithm-but-bcx-aurelia-dnd-is-not-a-dragula-wrapper">We use <a href="https://bevacqua.github.io/dragula/"><code>dragula</code></a> algorithm, but <code>bcx-aurelia-dnd</code> is not a <code>dragula</code> wrapper</h2>\n<p>We use <code>dragula</code>&#39;s algorithm to avoid native HTML5 DnD API (see <a href="#/faq">FAQ</a>), we don&#39;t inherit or expose any <code>dragula</code> API (they don&#39;t even exist in the code). We provide APIs fit in MVC/MVVM natively.</p>\n<h2 id="alternative-projects">Alternative projects</h2>\n<p>There are few alternative projects in Aurelia community. List them here for reference.</p>\n<ol>\n<li><strong><a href="https://github.com/michaelmalonenz/aurelia-dragula"><code>aurelia-dragula</code></a></strong> a <code>dragula</code> wrapper to provide convenient interface to Aurelia. Handy to existing <code>dragula</code> users.</li>\n<li><strong><a href="https://github.com/oribella/aurelia-sortable"><code>oribella-aurelia-sortable</code></a></strong> based on very interesting <a href="https://github.com/oribella/oribella"><code>oribella</code></a>, can sort list or multiple lists.</li>\n<li><strong><a href="https://github.com/eriklieben/aurelia-sortablejs"><code>aurelia-sortablejs</code></a></strong> based on <a href="https://github.com/rubaxa/Sortable"><code>Sortablejs</code></a>, can sort list or multiple lists, visually appealing.</li>\n</ol>\n<h2 id="use-inside-aurelia-app">Use inside Aurelia app</h2>\n<p>To start with your Aurelia app.</p>\n<blockquote>\n<p>with aurelia-cli <code>au install bcx-aurelia-dnd</code>.</p>\n</blockquote>\n<blockquote>\n<p>with webpack <code>npm i bcx-aurelia-dnd</code>.</p>\n</blockquote>\n<p>There is a single class <code>DndService</code> provided by <code>bcx-aurelia-dnd</code>. Inject it to your component.</p>\n<div><code-viewer value="import {inject} from \'aurelia-framework\';\nimport {DndService} from \'bcx-aurelia-dnd\';\n\n@inject(DndService)\nexport class YourComponent {\n  constructor(dndService) {\n    this.dndService = dndService;\n  }\n}" mode="js"></code-viewer></div>\n\n<blockquote>\n<p>Here we rely on default behavior of Aurelia DI (dependency injection). Aurelia DI creates a singleton <code>dndService</code> instance for all components to share.</p>\n</blockquote>\n<blockquote>\n<p>For TypeScript user, have a look at <a href="#/typescript-support">TypeScript Support</a>.</p>\n</blockquote>\n<p>Let&#39;s get started to add a <a href="#/dnd-source">DnD source</a>.</p>\n</template>'}),define("text!tutorial/reorderable-repeat-limitation.html",[],function(){return'<template><h2 id="bcx-aurelia-reorderable-repeat-limitation">bcx-aurelia-reorderable-repeat limitation</h2>\n<p><code>bcx-aurelia-reorderable-repeat</code> doesn&#39;t support repeat on <code>template</code> element.</p>\n<p>Following html generates an Aurelia error.</p>\n<div><code-viewer value="<template reorderable-repeat.for=&quot;obj of array&quot;>\n  \x3c!-- inner html --\x3e\n</template>" mode="html"></code-viewer></div>\n\n<p><code>bcx-aurelia-reorderable-repeat</code> only supports <code>Array</code> model, not <code>Set</code>, <code>Map</code> or <code>Object</code> (Those 3 are supported by standard Aurelia repeater). We are trying to reorder something, only array makes sense here.</p>\n<p>The DOM performance is theoretically really bad with <code>bcx-aurelia-reorderable-repeat</code>. But you would not feel it, since the array you want to reorder is typically not an array of thousands.</p>\n<p>The performance hit is not due to <code>bcx-aurelia-dnd</code>, it is my understanding on Aurelia&#39;s repeater. In order to support reordering duplicated primitive values (like <code>[&#39;one&#39;, &#39;one&#39;, &#39;two&#39;]</code>), I removed all DOM related optimization code from standard repeater (which skips re-rendering when reordering <code>&#39;one&#39;</code> and <code>&#39;one&#39;</code>). I will definitely revisit the repeater optimization code.</p>\n</template>'}),define("text!tutorial/reorderable-repeat-multi-lists.html",[],function(){return'<template><h1 id="reordering-across-multiple-lists">Reordering across multiple lists</h1>\n<p>From <code>v0.5.0</code>, <code>reorderable-repeat</code> supports reordering across multiple lists.</p>\n<h2 id="reorderable-group"><code>reorderable-group</code></h2>\n<p>By default, <code>reorderable-repeat</code> isolates every repeaters to avoid crosstalk. To allow reordering across multiple repeaters, use attribute <code>reorderable-group=&quot;groupName&quot;</code> to mark those repeaters with same <code>groupName</code>.</p>\n<blockquote>\n<p>Here we demo two lists in one group. But there is no limit on how many lists you can assign to same group.</p>\n</blockquote>\n<compose view-model="../examples/er6-multi-lists/index"></compose>\n\n<blockquote>\n<p>Since we are moving item across two or more arrays, you need to make sure the view templates for every repeaters in the group can <strong>handle all model shapes</strong>.</p>\n</blockquote>\n<blockquote>\n<p>Different from other attributes like <code>reorderable-direction</code>, <code>reorderable-group</code> can only accept string literal, not a binding. <code>reorderable-group.bind=&quot;group&quot;</code> would not work. We only support static group name, not dynamic group name.</p>\n</blockquote>\n<blockquote>\n<p>In multi-list mode, the <code>reorderable-after-reordering</code> callback won&#39;t get the 2nd argument (the change <code>{fromIndex, toIndex}</code>) if the change is crossing two lists. It only gets the 2nd argument of change when the reordering is locally within one of the lists.</p>\n</blockquote>\n<p>Too easy? Not yet, there is one big problem. Try move all numbers to letters array, once left side is empty, there is no way to move any item back!</p>\n<p>What&#39;s going on?</p>\n<h2 id="reorderable-group-for-custom-attribute"><code>reorderable-group-for</code> custom attribute</h2>\n<p>Different from most DnD libraries, <code>reorderable-repeat</code> <strong>doesn&#39;t have concept of container</strong>, all DnD events are handled by those repeated views themselves. That&#39;s why <code>reorderable-repeat</code> is so easy to use.</p>\n<p>This simplification created a problem with empty array model. When array is empty, there is no child views to handle DnD events.</p>\n<p>To cater the deficit, <code>reorderable-group-for</code> custom attribute is introduced to behave similar to a container.</p>\n<p>It must be strictly used as:</p>\n<div><code-viewer value="<some-element reorderable-group-for.bind=&quot;arrayModel&quot;> ... </some-element>" mode="html"></code-viewer></div>\n\n<blockquote>\n<p><code>arrayModel</code> is the same model you used in <code>reorderable-repeat.for=&quot;item of arrayModel&quot;</code>.</p>\n</blockquote>\n<p>Usually, you use <code>reorderable-group-for</code> on some parent element of the repeater. It behaves like an extra DnD target for that repeater. It also effectively enlarge the responsive area.</p>\n<p>Now even empty array have some DOM to receive DnD events.</p>\n<compose view-model="../examples/er7-multi-lists-with-group-for/index"></compose>\n\n<blockquote>\n<p>It&#39;s not required to use <code>reorderable-group-for</code> on parent element of the repeater. You can use on any DOM element, it will find the corresponding repeater automatically.</p>\n</blockquote>\n<blockquote>\n<p><code>reorderable-group-for</code> is named after <code>&lt;label for=&quot;field&quot;&gt;</code>. You can think it behaves like a <code>label</code> (<code>reorderable-group-for</code>) to an <code>input</code> (<code>reorderable-repeater</code> with group). <code>label</code> can be parent element of <code>input</code> or sibling element of <code>input</code>, when you click the <code>label</code> (hover the <code>reorderable-group-for</code>), it behaves like you clicked the <code>input</code> (hover child views of <code>reorderable-repeater</code>).</p>\n</blockquote>\n<p>That concludes all features of <code>bcx-aurelia-reorderable-repeat</code>.</p>\n</template>'}),define("text!tutorial/reorderable-repeat.html",[],function(){return'<template><h1 id="bcx-aurelia-reorderable-repeat-basics">bcx-aurelia-reorderable-repeat basics</h1>\n<p>A customised Aurelia repeater that supports drag-and-drop reordering automatically.</p>\n<h2 id="add-to-your-aurelia-app">Add to your Aurelia app</h2>\n<h3 id="install-package">Install package</h3>\n<p><code>npm i bcx-aurelia-reorderable-repeat</code> or <code>yarn add bcx-aurelia-reorderable-repeat</code>.</p>\n<blockquote>\n<p>For aurelia-cli users, please make sure to use aurelia-cli version <code>1.0.0-beta.1</code> or above.</p>\n</blockquote>\n<h3 id="load-plugin">Load plugin</h3>\n<p>In you app main.js file.</p>\n<div><code-viewer value="aurelia.use.plugin(PLATFORM.moduleName(\'bcx-aurelia-reorderable-repeat\'));" mode="js"></code-viewer></div>\n\n<h2 id="usage">Usage</h2>\n<p>Simply use <code>reorderable-repeat.for=&quot;item of items&quot;</code> in your view template. That&#39;s it!</p>\n<compose view-model="../examples/er1-reorderable-repeat/index"></compose>\n\n<h3 id="customise-item-style-under-drag">Customise item style under drag</h3>\n<p>If you have not read <a href="#/overview">tutorial</a> for <code>bcx-aurelia-dnd</code>, we recommend you to read it through. If you have not, here are some key information:</p>\n<ul>\n<li><p>when you drag a item, the &quot;image&quot; floating with you mouse is called <code>preview</code>, it&#39;s a DOM element (<code>bcx-aurelia-dnd</code> cloned from the source element) lives outside of Aurelia&#39;s control.</p>\n</li>\n<li><p><code>bcx-aurelia-reorderable-repeat</code> hides the algorithm showing in example <a href="#/e6-reorder-list">6. underneath algorithm of reorderable-repeat</a>.</p>\n</li>\n<li><p>the original source element (which you started dragging) is still there. <code>bcx-aurelia-reorderable-repeat</code> just added a css class <code>reorderable-repeat-dragging-me</code> to the element.</p>\n</li>\n</ul>\n<blockquote>\n<p>The style defined in class <code>reorderable-repeat-dragging-me</code> is just hiding the source element without affecting layout.</p>\n</blockquote>\n<div><code-viewer value=".reorderable-repeat-dragging-me {\n  visibility: hidden;\n}" mode="css"></code-viewer></div>\n\n<p>To customise the DOM under drag, you can overwrite <code>.reorderable-repeat-dragging-me</code> in your style sheet, or use <code>.reorderable-repeat-dragging-me.your-class</code> to localize the customisation.</p>\n<blockquote>\n<p>When customising, remember to unset the visibility first <code>visibility: visible; /* or inherit; */</code>.</p>\n</blockquote>\n<p>Here is a style customised version of previous example.</p>\n<compose view-model="../examples/er2-reorderable-repeat-customise-style/index"></compose>\n\n<p>Note in customisation, you need to unset <code>visibility</code> first.</p>\n<blockquote>\n<p>While the item being dragged receives class <code>.reorderable-repeat-dragging-me</code>, all items involved in reordering receive additional class <code>.reorderable-repeat-reordering</code>. Be default, <code>.reorderable-repeat-reordering</code> has no impact on style.</p>\n</blockquote>\n<h3 id="use-handler-to-limit-where-user-can-start-drag">Use handler to limit where user can start drag</h3>\n<p><code>bcx-aurelia-dnd</code> supports optional <code>handler</code> option on source <code>delegate</code> to limit where drag can start. In <code>bcx-aurelia-reorderable-repeat</code>, you can pass optional attribute <code>reorderable-dnd-handler-selector</code> on the repeated DOM to select a <code>handler</code> for undernearth source elements.</p>\n<blockquote>\n<p><code>reorderable-dnd-handler-selector</code> is used on every source elements with <code>element.querySelector(...)</code> to find out the handler.</p>\n</blockquote>\n<compose view-model="../examples/er3-reorderable-repeat-with-handler/index"></compose>\n\n<h3 id="customise-preview">Customise Preview</h3>\n<p><code>bcx-aurelia-reorderable-repeat</code> does not hide <code>bcx-aurelia-dnd</code>&#39;s limitation on drawing preview.</p>\n<blockquote>\n<p>To understand this topic, please go through full <code>bcx-aurelia-dnd</code> <a href="#/overview">tutorial</a>.</p>\n</blockquote>\n<p>There are two situations you want to use customised preview.</p>\n<ol>\n<li>when the built-in preview drawer doesn&#39;t draw preview to your expectation, either due to css limitation or DOM hierarchy limitation.</li>\n<li>when you want a totally different preview, for instance, customise &quot;cursor&quot; during DnD session.</li>\n</ol>\n<p>To draw a customised preview, use optional attribute <code>reorderable-dnd-preview</code>. The attribute supports 2 forms:</p>\n<ul>\n<li><p><code>reorderable-dnd-preview=&quot;methodName&quot;</code> the string passed in is a method name on your component. The method will receive the current item (model, not DOM) been dragged, it needs to return a DOM element (unattached to DOM tree) with reasonable size.</p>\n</li>\n<li><p><code>reorderable-dnd-preview.call=&quot;methodInScope(smthInScope, smth2InScope)&quot;</code> the evaluated result of the function call must be a DOM element (unattached to DOM tree) with reasonable size.</p>\n</li>\n</ul>\n<compose view-model="../examples/er4-reorderable-repeat-customise-preview/index"></compose>\n\n<p>Here we use <code>reorderable-dnd-preview=&quot;drawPreview&quot;</code>, you can also use <code>reorderable-dnd-preview.call=&quot;drawPreview(item)&quot;</code></p>\n<h3 id="callback-after-reordering">Callback after reordering</h3>\n<p>Use optional attribute <code>reorderable-after-reordering</code> to specify a callback. Like <code>reorderable-dnd-preview</code>, it supports 2 forms.</p>\n<blockquote>\n<p>When using the string form with method name, that method will receive 2 arguments: 1) the array model that has been reordered, 2) the change <code>{fromIndex, toIndex}</code>.</p>\n</blockquote>\n<p>The example above shows the usage of <code>reorderable-after-reordering</code>, it prints the list in browser console after reordering.</p>\n<h3 id="direction-of-dom-flow">Direction of DOM flow</h3>\n<p>By default, <code>bcx-aurelia-reorderable-repeat</code> thinks your DOM list flows from top to bottom.</p>\n<p>If your DOM list flows rather from left to right (or from right to left), you can pass attribute <code>reorderable-direction=&quot;right&quot;</code> (for flow from left to right) or <code>reorderable-direction=&quot;left&quot;</code> (for flow from right to left).</p>\n<blockquote>\n<p>The default value of &quot;reorderable-direction&quot; is &quot;down&quot;, means flow from top to bottom.</p>\n</blockquote>\n<blockquote>\n<p>We support <code>reorderable-direction=&quot;up&quot;</code> (for flow from bottom to top). You can achieve this unusual layout with <code>flex-direction: column-reverse;</code>.</p>\n</blockquote>\n<blockquote>\n<p>Even in layout with <code>flex-wrap: wrap;</code>, <code>reorderable-repeat</code> still works fine.</p>\n</blockquote>\n<compose view-model="../examples/er5-reorderable-repeat-direction/index"></compose>\n\n<p>Let&#39;s move on to <a href="#/multi-lists">reordering across multiple lists</a>.</p>\n</template>'}),define("text!tutorial/testing.html",[],function(){return'<template><h1 id="testing">Testing</h1>\n<h2 id="unit-test-without-view-layer-in-either-nodejs-or-browser-environment">Unit test without view layer in either NodeJS or browser environment</h2>\n<p>If you do unit test on component JS code, mock up <code>DndService</code> is easy because of dependency injection.</p>\n<blockquote>\n<p>We have yet not provided <code>DndServiceTest</code> mock class for you to import in test code. We will definitely provide it in future.</p>\n</blockquote>\n<p>In this repo, there is some sample test code on the second example <a href="#/e2-simple-move-hover">&quot;2. move object, preview off, use dndHover&quot;</a>.</p>\n<compose view-model="../examples/e2-simple-move-hover/test" view="../examples/e2-simple-move-hover/index.html"></compose>\n\n<blockquote>\n<p>There is an example to mock a DnD session in <code>container.spec.js</code>, you can use it as a base to test your DnD target <code>delegate</code>.</p>\n</blockquote>\n<blockquote>\n<p>There is no much mock in <code>box.spec.js</code>, because this source delegate didn&#39;t listen to any session based properties or events. If you need, use the a similar mock like the one in <code>container.spec.js</code>.</p>\n</blockquote>\n<blockquote>\n<p>No mouse events simulation needed to do unit test, as mouse events are hidden in <code>DndService</code>.</p>\n</blockquote>\n<h2 id="testing-with-view-layer">Testing with view layer</h2>\n<p>This is what Aurelia official document demonstrated. When you do DOM based test, you can use the real <code>DndService</code> instance. You need to simulate mouse events to drive a DnD session.</p>\n<p>Read <a href="https://github.com/buttonwoodcx/bcx-aurelia-dnd"><code>bcx-aurelia-dnd</code></a> test code to see some example on how to simulate a mouse event with enough information for <code>DndService</code> to work.</p>\n<p><code>bcx-aurelia-dnd</code> listens mouse/touch events at top HTML document level. For most of your mouse event simulation, it doesn&#39;t matter what&#39;s the <code>event.target</code>. But <code>event.target</code> does matter for your first mouse event simulation, the <code>&#39;mousedown&#39;</code> event that starts a DnD session.</p>\n<p>The first <code>&#39;mousedown&#39;</code> <code>event.target</code> must be your intended source/handler(if defined) element (or its child element), <code>DndService</code> needs this information to find a matching DnD source delegate.</p>\n</template>'}),define("text!tutorial/turn-off-preview-use-hover.html",[],function(){return'<template><h1 id="turn-off-preview-use-dndhover-">Turn off preview, use <code>dndHover()</code></h1>\n<h2 id="turn-off-preview">Turn off preview</h2>\n<p>The first thing you can do is to turn off preview. Simply pass option <code>{noPreview: true}</code> to <code>this.dndService.addSource(this, {noPreview: true})</code>.</p>\n<h2 id="use-dndhover-for-real-time-feedback">Use dndHover for real-time feedback</h2>\n<p>Preview has its limitation, it is a static snapshot of source element at the time of starting DnD session. That means the preview would never change during a DnD session.</p>\n<p>Instead of using preview, we can turn preview off, and use optional <code>dndHover(location)</code> callback on target delegate for real-time feedback.</p>\n<p>To demonstrate the purpose, we put a real-time clock on every boxes. You can see it keeps updating the clock during a DnD session.</p>\n<compose view-model="../examples/e2-simple-move-hover/index"></compose>\n\n<p>What happened in above code:</p>\n<p>For the source <code>delegate</code> (box), we turned off preview, removed <code>show.bind=&quot;!draggingMe&quot;</code>.</p>\n<blockquote>\n<p>You can bring <code>draggingMe</code> back, then use it to control the style of dragging box, for instance to adjust <code>background-color</code> or <code>box-shadow</code> when dragging.</p>\n</blockquote>\n<p>For the target <code>delegate</code> (container),</p>\n<ul>\n<li>in html template, instead of repeat on original items list, we repeat on patched items list, which is the original items patched by intention.</li>\n<li>we capture user intention in <code>dndHover(location)</code> callback. Beware, don&#39;t mutate the real items list yet. We use temporary property <code>intention</code> to save this information.</li>\n<li>we apply the intention in <code>dndDrop(location)</code> callback, as app user intended.</li>\n<li>we reset temporary property <code>intention</code> before and after a DnD session by subscribing events <code>&#39;dnd:willStart&#39;</code> and <code>&#39;dnd:didEnd&#39;</code>.</li>\n</ul>\n<blockquote>\n<p>When you use <code>dndHover</code> to constantly patch original list, depending on how complex the patch is, aurelia repeater might not be able to reuse existing child component, it might destroy old child components and create new components. That will trigger multiple add/remove Source/Target through <code>attached()</code> and <code>detached()</code> callback. <code>DndService</code> is totally fine with dynamical changing of sources and targets.</p>\n</blockquote>\n<h2 id="published-events-through-aurelia-event-aggregator">Published events through Aurelia Event Aggregator</h2>\n<p>During a DnD session, <code>DndService</code> publishes four events you can subscribe to.</p>\n<ul>\n<li><code>dnd:willStart</code>, just before starting of DnD session, all <code>isProcessing</code>, <code>model</code>, <code>isHovering</code> ... are still <code>undefined</code>.</li>\n<li><code>dnd:didStart</code>, just after starting of DnD session, all <code>isProcessing</code>, <code>model</code>, <code>isHovering</code> ... have been set. But none of any targets received <code>dndHover()</code> / <code>dndDrop()</code> callback.</li>\n<li><code>dnd:willEnd</code>, just before end of a DnD session, all <code>isProcessing</code>, <code>model</code>, <code>isHovering</code> ... are still set. Just before a target (if there is valid one with canDrop:true under the mouse) receives <code>dndDrop()</code> callback.</li>\n<li><code>dnd:didEnd</code>, after a DnD session finished. all <code>isProcessing</code>, <code>model</code>, ... are set to <code>undefined</code>. Final <code>dndDrop()</code> callback has been fired if there is a valid target.</li>\n</ul>\n<p>You can use them to prepare or cleanup your environment for a DnD session.</p>\n<blockquote>\n<p>If you want, you can subscribe them in component without a reference of <code>dndService</code> instance.</p>\n</blockquote>\n<blockquote>\n<p>In the example code above, instead of applying intention in <code>dndDrop()</code> callback, you can make empty <code>dndDrop() {/* no-op */}</code>, then apply intention in <code>&#39;dnd:didEnd&#39;</code> event subscriber before reset intention. The difference is this alternative solution can respond to drop outside of the target element (outside drop would not trigger <code>dndDrop()</code>), it can use last known intention when user released mouse button outside of the target element.</p>\n</blockquote>\n<p>Let&#39;s move on to <a href="#/customise-preview-and-source-handler">customise preview, optional source handler</a>.</p>\n</template>'}),define("text!tutorial/typescript-support.html",[],function(){return"<template><h1 id=\"typescript-support\">TypeScript Support</h1>\n<p><code>bcx-aurelia-dnd</code> includes a type declaration file for basic TypeScript support.</p>\n<p><code>bcx-aurelia-reorderable-repeat</code> has no JavaScript interface exposed to end user, hence no type declaration file is provided.</p>\n<h2 id=\"additional-type-for-bcx-aurelia-dnd\">Additional type for bcx-aurelia-dnd</h2>\n<p>In TypeScript project, on top of normal import, you can import additional interface declarations:</p>\n<ul>\n<li><code>SourceDelegate</code> for dnd source.</li>\n<li><code>TargetDelegate</code>, <code>TargetDelegateInjectedDnd</code>, <code>DndLocation</code> for dnd target:</li>\n</ul>\n<blockquote>\n<p>This is for TypeScript to know better about the types. It&#39;s optional but recommended, you don&#39;t need to import them for TypeScript to work.</p>\n</blockquote>\n<p>Here is an example.</p>\n<div><code-viewer value=\"import {DndService,\n        TargetDelegate,\n        TargetDelegateInjectedDnd,\n        DndLocation} from 'bcx-aurelia-dnd';\nimport {autoinject, computedFrom} from 'aurelia-framework';\n\n@autoinject\nexport class App implements TargetDelegate {\n  dndService: DndService;\n\n  // need to declare 'dnd' before using it,\n  // otherwise TypeScript compiler will complain.\n  // 'dnd?: any;' also works, but has no typing information.\n  dnd?: TargetDelegateInjectedDnd;\n\n  constructor(dndService: DndService) {\n    this.dndService = dndService;\n  }\n\n  attached() {\n    this.dndService.addTarget(this);\n  }\n\n  detached() {\n    this.dndService.removeTarget(this);\n  }\n\n  dndCanDrop(model: any): boolean {\n    //...\n  }\n\n  dndDrop(location: DndLocation): void {\n    //...\n  }\n\n  @computedFrom('dnd', 'dnd.isProcessing', 'dnd.canDrop', 'dnd.isHoveringShallowly')\n  get overMe(): Boolean {\n    const {dnd} = this;\n    if (!dnd) return false;\n\n    // with TargetDelegateInjectedDnd, TypeScript knows that\n    // isProcessing, canDrop, isHoveringShallowly are all boolean.\n\n    const {isProcessing, canDrop, isHoveringShallowly} = dnd;\n    return isProcessing && canDrop && isHoveringShallowly;\n  }\n}\" mode=\"js\"></code-viewer></div>\n</template>"}),define("resources",["resources/index"],function(e){return e});